"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[337],{71337:function(e,t,n){n.r(t),n.d(t,{BedModule:function(){return ue}});var s=n(38583),o=n(95987),i=n(55477),l=n(76185),r=(()=>{return(e=r||(r={})).BedAllotmentRequested="[View BedAllotment Page] BedAllotment Requested",e.BedAllotmentLoaded="[BedAllotments API] BedAllotment Loaded",e.AllBedAllotmentsRequested="[BedAllotments Home Page] All BedAllotments Requested",e.AllBedAllotmentsLoaded="[BedAllotments API] All BedAllotments Loaded",e.BedAllotmentSaved="[Edit BedAllotment Dialog] BedAllotment Saved",r;var e})();class a{constructor(e){this.payload=e,this.type=r.BedAllotmentRequested}}class d{constructor(e){this.payload=e,this.type=r.BedAllotmentLoaded}}class c{constructor(){this.type=r.AllBedAllotmentsRequested}}class u{constructor(e){this.payload=e,this.type=r.AllBedAllotmentsLoaded}}var m=n(23065),p=n(80273);const h=(0,p.H)(),b=h.getInitialState({allBedAllotmentsLoaded:!1});function f(e=b,t){switch(t.type){case r.BedAllotmentLoaded:return h.addOne(t.payload.bedAllotment,e);case r.AllBedAllotmentsLoaded:return h.setAll(t.payload.bedAllotments,Object.assign(Object.assign({},e),{allBedAllotmentsLoaded:!0}));case r.BedAllotmentSaved:return h.updateOne(t.payload.bedAllotment,e);default:return e}}const{selectAll:B}=h.getSelectors(),y=(0,m.ZF)("bedAllotments"),A=(0,m.P1)(y,B),g=(0,m.P1)(y,e=>e.allBedAllotmentsLoaded);var v=n(68307),C=n(37716),w=n(98152),j=n(54550);const S=function(){return{type:"zoom"}},_=function(e){return{animation:e}};let I=(()=>{class e{constructor(e,t){this.service=e,this.store=t,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},bed_number:{title:"Bed",type:"string"},patient_name:{title:"Patient",type:"string"},alloted_time:{title:"Alloted Time",type:"string"},discharge_time:{title:"Discharge Time",type:"string"},status:{title:"Status",type:"string"}}},this.source=new l.nC,this.store.pipe((0,m.Ys)(g),(0,v.b)(e=>{e||this.store.dispatch(new c)})).subscribe(),this.allBedAllotments$=this.store.pipe((0,m.Ys)(A))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275directiveInject(w.B),C.\u0275\u0275directiveInject(m.yh))},e.\u0275cmp=C.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-allotment"]],decls:8,vars:8,consts:[["type","submit","nbButton",""],["icon","star",3,"options"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(C.\u0275\u0275elementStart(0,"nb-card"),C.\u0275\u0275elementStart(1,"nb-card-header"),C.\u0275\u0275text(2," Bed Allotment's Table "),C.\u0275\u0275elementStart(3,"button",0),C.\u0275\u0275element(4,"nb-icon",1),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(5,"nb-card-body"),C.\u0275\u0275elementStart(6,"ng2-smart-table",2),C.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),C.\u0275\u0275pipe(7,"async"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&e&&(C.\u0275\u0275advance(4),C.\u0275\u0275property("options",C.\u0275\u0275pureFunction1(6,_,C.\u0275\u0275pureFunction0(5,S))),C.\u0275\u0275advance(2),C.\u0275\u0275property("settings",t.settings)("source",C.\u0275\u0275pipeBind1(7,3,t.allBedAllotments$)))},directives:[j.Asz,j.ndF,j.DPz,j.yKW,l.T5],pipes:[s.Ov],styles:[""]}),e})(),P=(()=>{class e{constructor(e){this.service=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Category",type:"string"},lastName:{title:"Description",type:"string"}}},this.source=new l.nC;const t=this.service.getData();this.source.load(t)}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275directiveInject(w.B))},e.\u0275cmp=C.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-category"]],decls:7,vars:2,consts:[["type","submit","nbButton","","status","danger"],[1,"fa","fa-edit"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(C.\u0275\u0275elementStart(0,"nb-card"),C.\u0275\u0275elementStart(1,"nb-card-header"),C.\u0275\u0275text(2," Bed Category's Table "),C.\u0275\u0275elementStart(3,"button",0),C.\u0275\u0275element(4,"i",1),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(5,"nb-card-body"),C.\u0275\u0275elementStart(6,"ng2-smart-table",2),C.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&e&&(C.\u0275\u0275advance(6),C.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[j.Asz,j.ndF,j.DPz,j.yKW,l.T5],styles:[""]}),e})();var k=(()=>{return(e=k||(k={})).BedRequested="[View Bed Page] Bed Requested",e.BedLoaded="[Beds API] Bed Loaded",e.AllBedsRequested="[Beds Home Page] All Beds Requested",e.AllBedsLoaded="[Beds API] All Beds Loaded",e.BedSaved="[Edit Bed Dialog] Bed Saved",k;var e})();class L{constructor(e){this.payload=e,this.type=k.BedRequested}}class O{constructor(e){this.payload=e,this.type=k.BedLoaded}}class ${constructor(){this.type=k.AllBedsRequested}}class E{constructor(e){this.payload=e,this.type=k.AllBedsLoaded}}const R=(0,p.H)(),z=R.getInitialState({allBedsLoaded:!1});function D(e=z,t){switch(t.type){case k.BedLoaded:return R.addOne(t.payload.bed,e);case k.AllBedsLoaded:return R.setAll(t.payload.beds,Object.assign(Object.assign({},e),{allBedsLoaded:!0}));case k.BedSaved:return R.updateOne(t.payload.bed,e);default:return e}}const{selectAll:q}=R.getSelectors(),M=(0,m.ZF)("beds"),F=(0,m.P1)(M,q),T=(0,m.P1)(M,e=>e.allBedsLoaded),U=((0,m.P1)(F,e=>e.filter(e=>"Available"===e.status)),(0,m.P1)(F,e=>e.filter(e=>"Alloted"===e.status)),[{path:"",component:(()=>{class e{constructor(){this.tabs=[{title:"List",route:"/0/bed/list"},{title:"Categories",route:"/0/bed/category"},{title:"Allotment",route:"/0/bed/allotment"}]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=C.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed"]],decls:4,vars:1,consts:[[1,"row"],[1,"col-12"],["size","small"],["fullWidth","",3,"tabs"]],template:function(e,t){1&e&&(C.\u0275\u0275elementStart(0,"div",0),C.\u0275\u0275elementStart(1,"div",1),C.\u0275\u0275elementStart(2,"nb-card",2),C.\u0275\u0275element(3,"nb-route-tabset",3),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&e&&(C.\u0275\u0275advance(3),C.\u0275\u0275property("tabs",t.tabs))},directives:[j.Asz,j.l0$],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),e})(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:(()=>{class e{constructor(e,t){this.service=e,this.store=t,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},number:{title:"Bed Number",type:"string"},category_name:{title:"Category",type:"string"},status:{title:"Status",type:"string"}}},this.store.pipe((0,m.Ys)(T),(0,v.b)(e=>{e||this.store.dispatch(new $)})).subscribe(),this.allBeds$=this.store.pipe((0,m.Ys)(F))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275directiveInject(w.B),C.\u0275\u0275directiveInject(m.yh))},e.\u0275cmp=C.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-list"]],decls:8,vars:4,consts:[["type","submit","nbButton","","status","danger"],[1,"fa","fa-edit"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(C.\u0275\u0275elementStart(0,"nb-card"),C.\u0275\u0275elementStart(1,"nb-card-header"),C.\u0275\u0275text(2," Bed's Table "),C.\u0275\u0275elementStart(3,"button",0),C.\u0275\u0275element(4,"i",1),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementStart(5,"nb-card-body"),C.\u0275\u0275elementStart(6,"ng2-smart-table",2),C.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),C.\u0275\u0275pipe(7,"async"),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd(),C.\u0275\u0275elementEnd()),2&e&&(C.\u0275\u0275advance(6),C.\u0275\u0275property("settings",t.settings)("source",C.\u0275\u0275pipeBind1(7,2,t.allBeds$)))},directives:[j.Asz,j.ndF,j.DPz,j.yKW,l.T5],pipes:[s.Ov],styles:[""]}),e})()},{path:"category",component:P},{path:"allotment",component:I},{path:"**",component:i.w}]}]);let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=C.\u0275\u0275defineInjector({imports:[[o.Bz.forChild(U)],o.Bz]}),e})();var Y=n(55171),x=n(3679),H=n(73749),Q=n(64762),W=n(91601),K=n(19773),V=n(88002),X=n(57057),Z=n(45435),G=n(91841);class J{constructor(e,t,n,s,o,i,l,r){this.id=e,this.number=t,this.category_id=n,this.category_name=s,this.last_a_time=o,this.last_d_time=i,this.description=l,this.status=r}}let ee=(()=>{class e{adapt(e){return new J(e.id,e.number,e.category_id,e.category.bed_category,e.last_a_time,e.last_d_time,e.description,e.status)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var te=n(486);let ne=(()=>{class e{constructor(e,t,n){this.http=e,this.adapter=t,this.jarwis=n}findBedById(e){return this.http.get(this.jarwis.apiUrl+`/beds/${e}`)}findAllBeds(){return this.jarwis.getURI("beds").pipe((0,V.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}saveBed(e,t){return this.http.put("/api/beds/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275inject(G.eN),C.\u0275\u0275inject(ee),C.\u0275\u0275inject(te.R))},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class se{constructor(e,t,n){this.actions$=e,this.bedsService=t,this.store=n,this.loadBed$=this.actions$.pipe((0,W.l4)(k.BedRequested),(0,K.zg)(e=>this.bedsService.findBedById(e.payload.bedId)),(0,V.U)(e=>new O({bed:e}))),this.loadAllBeds$=this.actions$.pipe((0,W.l4)(k.AllBedsRequested),(0,X.M)(this.store.pipe((0,m.Ys)(T))),(0,Z.h)(([,e])=>!e),(0,K.zg)(()=>this.bedsService.findAllBeds()),(0,V.U)(e=>new E({beds:e})))}}se.\u0275fac=function(e){return new(e||se)(C.\u0275\u0275inject(W.eX),C.\u0275\u0275inject(ne),C.\u0275\u0275inject(m.yh))},se.\u0275prov=C.\u0275\u0275defineInjectable({token:se,factory:se.\u0275fac}),(0,Q.gn)([(0,W.Qm)()],se.prototype,"loadBed$",void 0),(0,Q.gn)([(0,W.Qm)()],se.prototype,"loadAllBeds$",void 0);class oe{constructor(e,t,n,s,o,i,l,r){this.id=e,this.bed_id=t,this.bed_number=n,this.patient_id=s,this.patient_name=o,this.alloted_time=i,this.discharge_time=l,this.status=r}}let ie=(()=>{class e{adapt(e){return new oe(e.id,e.bed_id,e.bed.number,e.patient_id,e.patient.user.first_name+" "+e.patient.user.other_name,e.alloted_time,e.discharge_time,e.status)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),le=(()=>{class e{constructor(e,t,n){this.http=e,this.adapter=t,this.jarwis=n}findBedAllotmentById(e){return this.http.get(this.jarwis.apiUrl+`/bed-allotment/${e}`)}findAllBedAllotments(){return this.jarwis.getURI("bed-allotment").pipe((0,V.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}saveBedAllotment(e,t){return this.http.put("/api/bed-allotment/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275inject(G.eN),C.\u0275\u0275inject(ie),C.\u0275\u0275inject(te.R))},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class re{constructor(e,t,n){this.actions$=e,this.bedAllotmentsService=t,this.store=n,this.loadBedAllotment$=this.actions$.pipe((0,W.l4)(r.BedAllotmentRequested),(0,K.zg)(e=>this.bedAllotmentsService.findBedAllotmentById(e.payload.bedAllotmentId)),(0,V.U)(e=>new d({bedAllotment:e}))),this.loadAllBedAllotments$=this.actions$.pipe((0,W.l4)(r.AllBedAllotmentsRequested),(0,X.M)(this.store.pipe((0,m.Ys)(g))),(0,Z.h)(([,e])=>!e),(0,K.zg)(()=>this.bedAllotmentsService.findAllBedAllotments()),(0,V.U)(e=>new u({bedAllotments:e})))}}re.\u0275fac=function(e){return new(e||re)(C.\u0275\u0275inject(W.eX),C.\u0275\u0275inject(le),C.\u0275\u0275inject(m.yh))},re.\u0275prov=C.\u0275\u0275defineInjectable({token:re,factory:re.\u0275fac}),(0,Q.gn)([(0,W.Qm)()],re.prototype,"loadBedAllotment$",void 0),(0,Q.gn)([(0,W.Qm)()],re.prototype,"loadAllBedAllotments$",void 0);var ae=n(28049);let de=(()=>{class e{constructor(e,t){this.bedsService=e,this.store=t}resolve(e,t){const n=e.params.id;return this.store.pipe((0,m.Ys)((e=>(0,m.P1)(M,t=>t.entities[e]))(n)),(0,v.b)(e=>{e||this.store.dispatch(new L({bedId:n}))}),(0,Z.h)(e=>!!e),(0,ae.P)())}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275inject(ne),C.\u0275\u0275inject(m.yh))},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ce=(()=>{class e{constructor(e,t){this.bedAllotmentsService=e,this.store=t}resolve(e,t){const n=e.params.id;return this.store.pipe((0,m.Ys)((e=>(0,m.P1)(y,t=>t.entities[e]))(n)),(0,v.b)(e=>{e||this.store.dispatch(new a({bedAllotmentId:n}))}),(0,Z.h)(e=>!!e),(0,ae.P)())}}return e.\u0275fac=function(t){return new(t||e)(C.\u0275\u0275inject(le),C.\u0275\u0275inject(m.yh))},e.\u0275prov=C.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ue=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=C.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=C.\u0275\u0275defineInjector({providers:[ne,de,le,ce],imports:[[s.ez,N,j.EoG,x.u5,j.nKr,j.T2N,j.zyh,j.MfT,H.$,j._WB,Y.R,l.ne,m.Aw.forFeature("beds",D),W.sQ.forFeature([se]),m.Aw.forFeature("bedAllotments",f),W.sQ.forFeature([re])]]}),e})()}}]);