"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[615],{79615:function(e,t,n){n.r(t),n.d(t,{AppointmentModule:function(){return Ce}});var i=n(38583),o=n(95987),r=n(55477),s=n(37716);let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["ngx-appointment-calender"]],decls:2,vars:0,template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1,"appointment-calender works!"),s.\u0275\u0275elementEnd())},styles:[""]}),e})();var l=n(23065),p=n(80273),m=(()=>{return(e=m||(m={})).AppointmentRequested="[View Appointment Page] Appointment Requested",e.AppointmentLoaded="[Appointments API] Appointment Loaded",e.AllAppointmentsRequested="[Appointments Home Page] All Appointments Requested",e.AllAppointmentsLoaded="[Appointments API] All Appointments Loaded",e.AppointmentSaved="[Edit Appointment Dialog] Appointment Saved",m;var e})();class d{constructor(e){this.payload=e,this.type=m.AppointmentRequested}}class c{constructor(e){this.payload=e,this.type=m.AppointmentLoaded}}class u{constructor(){this.type=m.AllAppointmentsRequested}}class h{constructor(e){this.payload=e,this.type=m.AllAppointmentsLoaded}}const f=(0,p.H)(),g=f.getInitialState({allAppointmentsLoaded:!1});function b(e=g,t){switch(t.type){case m.AppointmentLoaded:return f.addOne(t.payload.appointment,e);case m.AllAppointmentsLoaded:return f.setAll(t.payload.appointments,Object.assign(Object.assign({},e),{allAppointmentsLoaded:!0}));case m.AppointmentSaved:return f.updateOne(t.payload.appointment,e);default:return e}}const{selectAll:v}=f.getSelectors(),y=(0,l.ZF)("appointments"),x=(0,l.P1)(y,v),_=(0,l.P1)(x,e=>e.filter(e=>"Treated"===e.appointment_status)),S=(0,l.P1)(x,e=>e.filter(e=>"Confirmed"===e.appointment_status)),I=(0,l.P1)(x,e=>e.filter(e=>"Requested"===e.appointment_status)),w=(0,l.P1)(x,e=>e.filter(e=>"Cancelled"===e.appointment_status)),A=(0,l.P1)(x,e=>e.filter(e=>"Pending Confirmation"===e.appointment_status)),C=(0,l.P1)(y,e=>e.allAppointmentsLoaded);var E=n(68307),k=n(3679),P=n(54550),D=n(16738),O=n(18541),N=n(4242),M=n(65890),j=n(486),T=n(61758);function $(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"nb-option",25),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275property("value",e.value),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(e.value)}}function R(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",3),s.\u0275\u0275elementStart(1,"label",23),s.\u0275\u0275text(2,"Department"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(3,"br"),s.\u0275\u0275elementStart(4,"nb-select",24),s.\u0275\u0275template(5,$,2,2,"nb-option",15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(5),s.\u0275\u0275property("ngForOf",e.departments)}}function F(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"nb-option",25),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(e.name)}}function q(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",3),s.\u0275\u0275elementStart(1,"label",23),s.\u0275\u0275text(2,"Doctor"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(3,"br"),s.\u0275\u0275elementStart(4,"nb-select",26),s.\u0275\u0275listener("selectedChange",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().selectedDoctor=t})("selectedChange",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDoctorChoice(t)}),s.\u0275\u0275template(5,F,2,2,"nb-option",15),s.\u0275\u0275pipe(6,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(4),s.\u0275\u0275property("selected",e.selectedDoctor),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",s.\u0275\u0275pipeBind1(6,2,e.allDoctors$))}}function B(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"nb-option",25),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275property("value",t.index),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(e.range)}}function Y(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"nb-option",25),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275property("value",e.id),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(e.name)}}const V=function(){return{extraPlugins:"divarea",height:"120"}};let z=(()=>{class e{constructor(e,t,n,i,o){this.jarwis=e,this.store=t,this.formBuilder=n,this.toastrService=i,this.dateService=o,this.makeAppointmentForm=new k.cw({departmentId:new k.NI("",k.kI.required),dateTime:new k.NI("",k.kI.required),timeSlots:new k.NI("",k.kI.required),patientID:new k.NI("",k.kI.required),doctorID:new k.NI("",k.kI.required),appointmentRemark:new k.NI("",k.kI.required)}),this.sendAppointmentForm=new k.cw({departmentId:new k.NI("",k.kI.required),dateTime:new k.NI("",k.kI.required),timeSlots:new k.NI("",k.kI.required),patientID:new k.NI("",k.kI.required),doctorID:new k.NI("",k.kI.required),appointmentRemark:new k.NI("",k.kI.required)}),this.tt=0,this.b_times=[],this.s_times=[],this.schedule=[],this.appointments=[],this.date=new Date,this.step=40,this.selectedBooking="doctor",this.newItemEvent=new s.EventEmitter,this.appointments_start_times=[],this.doctor_app=!0,this.departments=[{value:"Dental"},{value:"Laboratory"},{value:"Blood Donor"},{value:"Pharmacy"}],this.allDoctors$=this.store.pipe((0,l.Ys)(O.Bv)),this.allPatients$=this.store.pipe((0,l.Ys)(N.QD)),this.allSchedules$=this.store.pipe((0,l.Ys)(M.mg)),this.allAppointments$=this.store.pipe((0,l.Ys)(x)),this.min=this.dateService.today(),this.max=this.dateService.addMonth(this.dateService.today(),1),this.dateTime=new k.NI("",[k.kI.required]),this.timeSlots=new k.NI("",[k.kI.required]),this.patientID=new k.NI("",[k.kI.required]),this.doctorID=new k.NI("",[k.kI.required]),this.appointmentRemark=new k.NI("",[k.kI.required]),this.makeAppointmentForm=n.group({DateTime:this.dateTime,TimeSlots:this.timeSlots,patientId:this.patientID,doctorId:this.doctorID,AppointmentRemark:this.appointmentRemark})}ngOnInit(){}onDoctorChoice(e){let t;console.log(e),this.employee_id=e,this.store.pipe((0,l.Ys)((0,M.AK)(e))).subscribe(e=>{t=e}),console.log(t),this.store.pipe((0,l.Ys)((0,M.sG)(e))).subscribe(e=>{e=e,console.log(e),e.meals.forEach(e=>{const t=[];t.push(e),t.map(e=>Object.assign({},e,{status:""}))[0].status=e.state})}),console.log(t)}onDateChange(e){let t;""===this.makeAppointmentForm.value.doctorId&&this.toastrService.show("","Kindly choose a Doctor",{status:"info",destroyByClick:!0,duration:2e3,hasIcon:!0,position:P.fe3.TOP_RIGHT,preventDuplicates:!1}),console.log(e),this.booking_date=D(new Date(e)).format("y-MM-DD"),this.dateQuery=this.formBuilder.group({date:this.booking_date}),this.jarwis.postURI("appointments/"+this.makeAppointmentForm.value.doctorId,this.dateQuery.value).subscribe(e=>{console.log(e.data),t=e.data,""!==t.schedule&&(this.schedule=t.schedule,""!==t.appointments&&(this.appointments=t.appointments,console.log(this.appointments)),this.dis_times(this.booking_date,this.schedule,this.appointments))},e=>{console.log(e),e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}dis_times(e=null,t,n){var i=JSON.parse('{"interval":[]}'),o=t.duration,r=t.end_time,s=t.start_time.split(":"),a=r.split(":"),l=60*+s[0]+ +s[1],p=60*+a[0]+ +a[1];this.tt=l,console.log(l),console.log(p);var m=["AM","PM"];console.log(JSON.stringify(n).length),Object.keys(i),this.appointments_start_times=[];for(let f=0;f<Object.keys(n).length;f++)this.appointments_start_times.push(n[f].s_time);console.log(this.appointments_start_times);for(var d=0;Number(this.tt)<Number(p);d++){var c=Math.floor(this.tt/60),u=this.tt%60;if(this.s_times[d]=("0"+c%12).slice(-2)+":"+("0"+u).slice(-2)+" "+m[Math.floor(c/12)],d>0){var h=!0;this.appointments_start_times.forEach(e=>{if(h=!0,Number(this.tt)<Number(n)&&Number(this.tt)+o<Number(n)||Number(this.tt)>Number(n)&&Number(this.tt)+o<Number(n))h=!0;else{var t=e.split(":"),n=60*+t[0]+ +t[1];console.log(n),Number(this.tt)>=Number(n)&&Number(n)+Number(o)<=Number(this.tt)+Number(o)?(console.log("Booked"),h=!1):h=!0}}),this.available_time_slots=this.s_times[d-1]+" - "+this.s_times[d],console.log(h),i.interval.push({start:this.s_times[d-1],end:this.s_times[d],range:this.available_time_slots}),console.log("new",i.interval),this.available_time_slots_array=i.interval}this.tt=Number(this.tt)+Number(o)}console.log(this.available_time_slots_array)}onTimeChoice(e){console.log(this.available_time_slots_array[e]),this.app_start_time=this.available_time_slots_array[e].start,this.app_end_time=this.available_time_slots_array[e].end}addAppointment(){this.sendAppointmentForm=this.formBuilder.group({doctor_id:this.makeAppointmentForm.value.doctorId,patient_id:this.makeAppointmentForm.value.patientId,start_time:this.app_start_time,end_time:this.app_end_time,date:this.booking_date}),this.jarwis.postURI("appointments",this.sendAppointmentForm.value).subscribe(e=>{console.log(e),void 0!==e.data.id?e.data.id&&(this.toastrService.show(e.data.date,"Appointment created",{status:"success",destroyByClick:!0,duration:2e3,hasIcon:!0,position:P.fe3.TOP_RIGHT,preventDuplicates:!1}),this.makeAppointmentForm.reset(),this.newItemEvent.emit({id:e.data})):(this.toastrService.show(e.data.message,"Kindly review entered data",{status:"danger",destroyByClick:!0,duration:2e3,hasIcon:!0,position:P.fe3.TOP_RIGHT,preventDuplicates:!1}),this.newItemEvent.emit({id:null}))})}changeAllocation(e){console.log(e),this.doctor_app="doctor"===e}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(j.R),s.\u0275\u0275directiveInject(l.yh),s.\u0275\u0275directiveInject(k.qu),s.\u0275\u0275directiveInject(P.quB),s.\u0275\u0275directiveInject(P.uui))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["ngx-make-appointment-form"]],outputs:{newItemEvent:"newItemEvent"},decls:47,vars:14,consts:[[1,"scrollable-container"],[1,"col-12"],[1,"row",3,"formGroup"],[1,"col-6","form-group"],["for","InputTemplate",1,"label"],["fullWidth","",3,"selected","selectedChange"],["value","doctor"],["value","department"],["class","col-6 form-group",4,"ngIf"],["for","InputEmail1",1,"label"],["nbInput","","fullWidth","","placeholder","Pick Date","formControlName","DateTime",3,"nbDatepicker","ngModelChange"],[3,"min","max"],["appointmentDatePicker",""],["formControlName","TimeSlots","fullWidth","",3,"ngModelChange"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","InputPatient",1,"label"],["formControlName","patientId","fullWidth","",3,"selected","selectedChange"],[1,"col-12","form-group"],["for","InputAppointmentRemark",1,"label"],["formControlName","AppointmentRemark",3,"config"],[1,"col-4","form-group"],["type","submit","nbButton","","status","info",3,"click"],["for","InputRefdByDoctor",1,"label"],["formControlName","departmentId","fullWidth",""],[3,"value"],["formControlName","doctorId","fullWidth","",3,"selected","selectedChange"]],template:function(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"span",0),s.\u0275\u0275elementStart(1,"nb-card"),s.\u0275\u0275elementStart(2,"nb-card-header"),s.\u0275\u0275text(3," Add Appointment Form"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"nb-card-body",1),s.\u0275\u0275elementStart(5,"div",2),s.\u0275\u0275elementStart(6,"div",3),s.\u0275\u0275elementStart(7,"label",4),s.\u0275\u0275text(8,"Booking To:"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(9,"br"),s.\u0275\u0275elementStart(10,"nb-select",5),s.\u0275\u0275listener("selectedChange",function(e){return t.selectedBooking=e})("selectedChange",function(e){return t.changeAllocation(e)}),s.\u0275\u0275elementStart(11,"nb-option",6),s.\u0275\u0275text(12,"Doctor"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"nb-option",7),s.\u0275\u0275text(14,"Department"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(15,R,6,1,"div",8),s.\u0275\u0275template(16,q,7,4,"div",8),s.\u0275\u0275elementStart(17,"div",3),s.\u0275\u0275elementStart(18,"label",9),s.\u0275\u0275text(19,"Date & Time"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(20,"br"),s.\u0275\u0275elementStart(21,"input",10),s.\u0275\u0275listener("ngModelChange",function(e){return t.onDateChange(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(22,"nb-datepicker",11,12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(24,"div",3),s.\u0275\u0275elementStart(25,"label",4),s.\u0275\u0275text(26,"Time Slots"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(27,"br"),s.\u0275\u0275elementStart(28,"nb-select",13),s.\u0275\u0275listener("ngModelChange",function(e){return t.onTimeChoice(e)}),s.\u0275\u0275elementStart(29,"nb-option",14),s.\u0275\u0275text(30,"Time Slot"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(31,B,2,2,"nb-option",15),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(32,"div",3),s.\u0275\u0275elementStart(33,"label",16),s.\u0275\u0275text(34,"Patient"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(35,"br"),s.\u0275\u0275elementStart(36,"nb-select",17),s.\u0275\u0275listener("selectedChange",function(e){return t.selectedPatient=e}),s.\u0275\u0275template(37,Y,2,2,"nb-option",15),s.\u0275\u0275pipe(38,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(39,"div",18),s.\u0275\u0275elementStart(40,"label",19),s.\u0275\u0275text(41,"Appointment Remark"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(42,"br"),s.\u0275\u0275element(43,"ckeditor",20),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(44,"div",21),s.\u0275\u0275elementStart(45,"button",22),s.\u0275\u0275listener("click",function(){return t.addAppointment()}),s.\u0275\u0275text(46," Submit "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=s.\u0275\u0275reference(23);s.\u0275\u0275advance(5),s.\u0275\u0275property("formGroup",t.makeAppointmentForm),s.\u0275\u0275advance(5),s.\u0275\u0275property("selected",t.selectedBooking),s.\u0275\u0275advance(5),s.\u0275\u0275property("ngIf",!t.doctor_app),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.doctor_app),s.\u0275\u0275advance(5),s.\u0275\u0275property("nbDatepicker",e),s.\u0275\u0275advance(1),s.\u0275\u0275property("min",t.min)("max",t.max),s.\u0275\u0275advance(9),s.\u0275\u0275property("ngForOf",t.available_time_slots_array),s.\u0275\u0275advance(5),s.\u0275\u0275property("selected",t.selectedPatient),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",s.\u0275\u0275pipeBind1(38,11,t.allPatients$)),s.\u0275\u0275advance(6),s.\u0275\u0275property("config",s.\u0275\u0275pureFunction0(13,V))}},directives:[P.Asz,P.ndF,P.yKW,k.JL,k.sg,P.rs,P.q51,i.O5,P.h8i,k.Fj,P.$kf,k.JJ,k.u,P.B4C,i.sg,T.ue,P.DPz],pipes:[i.Ov],styles:[""]}),e})();var L=n(68020),W=n(46655),U=n(76185);function Q(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275elementStart(1,"div",2),s.\u0275\u0275elementStart(2,"nb-card",3),s.\u0275\u0275elementStart(3,"nb-card-header"),s.\u0275\u0275text(4," Appointment's Table "),s.\u0275\u0275elementStart(5,"button",4),s.\u0275\u0275listener("click",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().openAddReport(t,"add")}),s.\u0275\u0275text(6," Add Appointment "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"nb-card-body"),s.\u0275\u0275elementStart(8,"nb-tabset",5),s.\u0275\u0275elementStart(9,"nb-tab",6),s.\u0275\u0275elementStart(10,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(11,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(12,"nb-tab",8),s.\u0275\u0275elementStart(13,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(14,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"nb-tab",9),s.\u0275\u0275elementStart(16,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(17,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(18,"nb-tab",10),s.\u0275\u0275elementStart(19,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(20,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(21,"nb-tab",11),s.\u0275\u0275elementStart(22,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(23,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(24,"nb-tab",12),s.\u0275\u0275elementStart(25,"ng2-smart-table",7),s.\u0275\u0275listener("deleteConfirm",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().onDeleteConfirm(t)}),s.\u0275\u0275pipe(26,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(10),s.\u0275\u0275property("settings",e.for_all_settings)("source",s.\u0275\u0275pipeBind1(11,12,e.allAppointments$)),s.\u0275\u0275advance(3),s.\u0275\u0275property("settings",e.settings)("source",s.\u0275\u0275pipeBind1(14,14,e.pendingAppointments$)),s.\u0275\u0275advance(3),s.\u0275\u0275property("settings",e.settings)("source",s.\u0275\u0275pipeBind1(17,16,e.confirmedAppointments$)),s.\u0275\u0275advance(3),s.\u0275\u0275property("settings",e.settings)("source",s.\u0275\u0275pipeBind1(20,18,e.treatedAppointments$)),s.\u0275\u0275advance(3),s.\u0275\u0275property("settings",e.settings)("source",s.\u0275\u0275pipeBind1(23,20,e.cancelledAppointments$)),s.\u0275\u0275advance(3),s.\u0275\u0275property("settings",e.settings)("source",s.\u0275\u0275pipeBind1(26,22,e.requestedAppointments$))}}function G(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",14),s.\u0275\u0275elementStart(1,"div",15),s.\u0275\u0275elementStart(2,"div",16),s.\u0275\u0275elementStart(3,"div",17),s.\u0275\u0275elementStart(4,"div",18),s.\u0275\u0275elementStart(5,"h5",19),s.\u0275\u0275text(6),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"p",20),s.\u0275\u0275text(8),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"div",21),s.\u0275\u0275element(10,"img",22),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"div",17),s.\u0275\u0275elementStart(12,"div",18),s.\u0275\u0275elementStart(13,"h5",19),s.\u0275\u0275text(14),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(15,"p",20),s.\u0275\u0275text(16,"FIRST VISIT"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(17,"div",23),s.\u0275\u0275element(18,"div",24),s.\u0275\u0275element(19,"div",25),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(20,"div",26),s.\u0275\u0275elementStart(21,"div",27),s.\u0275\u0275elementStart(22,"h5",28),s.\u0275\u0275text(23),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(24,"span",29),s.\u0275\u0275text(25,"20 mins"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(26,"div",23),s.\u0275\u0275elementStart(27,"p",30),s.\u0275\u0275elementStart(28,"strong",31),s.\u0275\u0275text(29,"Ksh 0.00"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(30,"div",32),s.\u0275\u0275elementStart(31,"button",33),s.\u0275\u0275text(32,"Reschedule"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(33,"button",34),s.\u0275\u0275text(34,"Approve"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;s.\u0275\u0275advance(6),s.\u0275\u0275textInterpolate2("",e.s_time," - ",e.e_time,""),s.\u0275\u0275advance(2),s.\u0275\u0275textInterpolate(e.date),s.\u0275\u0275advance(2),s.\u0275\u0275propertyInterpolate1("src","http://localhost:8000/uploads/images/users/",e.employee.user.usr_img,"",s.\u0275\u0275sanitizeUrl),s.\u0275\u0275advance(4),s.\u0275\u0275textInterpolate2("",e.employee.user.first_name," ",e.employee.user.other_name,""),s.\u0275\u0275advance(9),s.\u0275\u0275textInterpolate(e.remarks)}}function H(e,t){if(1&e){const e=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",1),s.\u0275\u0275elementStart(1,"div",2),s.\u0275\u0275elementStart(2,"nb-card",3),s.\u0275\u0275elementStart(3,"nb-card-header"),s.\u0275\u0275text(4," My Appointments "),s.\u0275\u0275elementStart(5,"button",4),s.\u0275\u0275listener("click",function(t){return s.\u0275\u0275restoreView(e),s.\u0275\u0275nextContext().openAddReport(t,"add")}),s.\u0275\u0275text(6," Add Appointment "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"nb-card-body"),s.\u0275\u0275elementStart(8,"div",1),s.\u0275\u0275template(9,G,35,7,"div",13),s.\u0275\u0275pipe(10,"async"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){const e=s.\u0275\u0275nextContext();s.\u0275\u0275advance(9),s.\u0275\u0275property("ngForOf",s.\u0275\u0275pipeBind1(10,1,e.allAppointments$))}}let K=(()=>{class e{constructor(e,t,n){this.windowService=e,this.store=t,this.dialogService=n,this.for_all_settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"},appointment_status:{title:"Status",type:"string"}}},this.settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"}}},this.simple_show=!1,localStorage.getItem("role");let i=localStorage.getItem("roles");console.log(i),("Patient"===i||"User"===i)&&(this.simple_show=!0),this.store.pipe((0,l.Ys)(O.Zy),(0,E.b)(e=>{e||this.store.dispatch(new L.dP)})).subscribe(),this.store.pipe((0,l.Ys)(N.AU),(0,E.b)(e=>{e||this.store.dispatch(new W.yi)})).subscribe(),this.store.pipe((0,l.Ys)(C),(0,E.b)(e=>{e||this.store.dispatch(new u)})).subscribe(),this.allDoctors$=this.store.pipe((0,l.Ys)(O.Bv)),this.allPatients$=this.store.pipe((0,l.Ys)(N.QD)),this.allAppointments$=this.store.pipe((0,l.Ys)(x)),this.pendingAppointments$=this.store.pipe((0,l.Ys)(A)),this.confirmedAppointments$=this.store.pipe((0,l.Ys)(S)),this.treatedAppointments$=this.store.pipe((0,l.Ys)(_)),this.cancelledAppointments$=this.store.pipe((0,l.Ys)(w)),this.requestedAppointments$=this.store.pipe((0,l.Ys)(I))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}openAddReport(e,t){this.openWindow(z,e.data,t)}openWindow(e,t,n){this.windowService.open(e,{context:{text:"some text to pass into template",data:t,type:n}})}open(){this.dialogService.open(z,{})}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(P.eJ1),s.\u0275\u0275directiveInject(l.yh),s.\u0275\u0275directiveInject(P.Gln))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["ngx-appointment-list"]],decls:2,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],["size","small"],["type","submit","nbButton","","status","danger",3,"click"],["fullWidth",""],["tabTitle","All"],[3,"settings","source","deleteConfirm"],["tabTitle","Pending Confimation"],["tabTitle","Confirmed"],["tabTitle","Treated"],["tabTitle","Cancelled"],["tabTitle","Requested"],["class","col-md-6 col-lg-4 col-xxxl-3 container-fluid px-1 py-5 mx-auto",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","col-xxxl-3","container-fluid","px-1","py-5","mx-auto"],[1,"row","d-flex","justify-content-center"],[1,"card"],[1,"row","d-flex","justify-content-between","mx-2","px-3","card-strip"],[1,"left","d-flex","flex-column"],[1,"mb-1"],[1,"text-muted","mb-1","sm-text"],[1,"right"],[3,"src"],[1,"right","d-flex"],[1,"fa","fa-comment-o"],[1,"fa","fa-phone"],[1,"row","justify-content-between","mx-2","px-3","card-strip"],[1,"left","d-flex"],[1,"mb-1","text-muted"],[1,"time"],[1,"mb-0","price"],[1,"text-muted"],[1,"row","d-flex","justify-content-between","mx-2","px-3"],[1,"btn","btn-white"],[1,"btn","btn-purple"]],template:function(e,t){1&e&&(s.\u0275\u0275template(0,Q,27,24,"div",0),s.\u0275\u0275template(1,H,11,3,"div",0)),2&e&&(s.\u0275\u0275property("ngIf",!t.simple_show),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.simple_show))},directives:[i.O5,P.Asz,P.ndF,P.DPz,P.yKW,P.kyn,P.TR4,U.T5,i.sg],pipes:[i.Ov],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}body[_ngcontent-%COMP%]{color:#000;overflow-x:hidden;height:100%;background-color:#d1c4e9;background-repeat:no-repeat}.card[_ngcontent-%COMP%]{margin:60px auto;border:none!important;width:450px}@media screen and (max-width: 768px){.card[_ngcontent-%COMP%]{width:350px}}.card-strip[_ngcontent-%COMP%]{border-bottom:1px solid lightgray;padding-top:20px;padding-bottom:20px}img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;cursor:pointer}.sm-text[_ngcontent-%COMP%]{font-size:15px}.fa[_ngcontent-%COMP%]{font-size:30px;padding:10px}.fa-comment-o[_ngcontent-%COMP%]{color:gray;cursor:pointer}.fa-phone[_ngcontent-%COMP%]{color:#1e88e5;padding-left:20px;cursor:pointer}.time[_ngcontent-%COMP%]{border:1px lightgray solid;border-radius:5px;font-weight:bold;padding:1px 8px;margin:0 6px}.price[_ngcontent-%COMP%]{font-size:20px}.text-muted[_ngcontent-%COMP%]{color:#bdbdbd!important}button[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline-width:0}.btn[_ngcontent-%COMP%]{width:48%;height:55px;margin:20px 0;font-weight:bold;letter-spacing:1px}.btn-white[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:1px gray solid}.btn-white[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.btn-purple[_ngcontent-%COMP%]{background-color:#5e35b1;color:#fff;border:1px #5E35B1 solid}.btn-purple[_ngcontent-%COMP%]:hover{background-color:#311b92;color:#fff}"]}),e})();const J=[{path:"",component:K,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"add",component:z},{path:"all",component:K},{path:"upcoming",component:(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["ngx-appointment-upcoming"]],decls:2,vars:0,template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1,"appointment-upcoming works!"),s.\u0275\u0275elementEnd())},styles:[""]}),e})()},{path:"calender",component:a},{path:"**",component:r.w}]}];let X=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({imports:[[o.Bz.forChild(J)],o.Bz]}),e})();var Z=n(73749),ee=n(55171),te=n(64762),ne=n(45887),ie=n(19773),oe=n(88002),re=n(57057),se=n(45435),ae=n(91841);class le{constructor(e,t,n,i,o,r,s,a,l,p,m,d){this.id=e,this.employee=t,this.doctor_id=n,this.patient=i,this.patient_id=o,this.doctor_name=r,this.patient_name=s,this.remarks=a,this.date=l,this.s_time=p,this.e_time=m,this.appointment_status=d}}let pe=(()=>{class e{adapt(e){return new le(e.id,e.employee,e.employee_id,e.patient,e.patient_id,`Dr. ${e.employee.user.first_name} ${e.employee.user.other_name}`,e.patient.user.first_name+" "+e.patient.user.other_name,e.remarks,e.date,e.s_time,e.e_time,e.appointment_status)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),me=(()=>{class e{constructor(e,t,n){this.http=e,this.adapter=t,this.jarwis=n}findAppointmentById(e){return this.http.get(this.jarwis.apiUrl+`/appointments/${e}`)}findAllAppointments(){return this.jarwis.getURI("appointments").pipe((0,oe.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}saveAppointment(e,t){return this.http.put("/api/appointments/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(ae.eN),s.\u0275\u0275inject(pe),s.\u0275\u0275inject(j.R))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class de{constructor(e,t,n){this.actions$=e,this.appointmentsService=t,this.store=n,this.loadAppointment$=this.actions$.pipe((0,ne.l4)(m.AppointmentRequested),(0,ie.zg)(e=>this.appointmentsService.findAppointmentById(e.payload.appointmentId)),(0,oe.U)(e=>new c({appointment:e}))),this.loadAllAppointments$=this.actions$.pipe((0,ne.l4)(m.AllAppointmentsRequested),(0,re.M)(this.store.pipe((0,l.Ys)(C))),(0,se.h)(([,e])=>!e),(0,ie.zg)(()=>this.appointmentsService.findAllAppointments()),(0,oe.U)(e=>new h({appointments:e})))}}de.\u0275fac=function(e){return new(e||de)(s.\u0275\u0275inject(ne.eX),s.\u0275\u0275inject(me),s.\u0275\u0275inject(l.yh))},de.\u0275prov=s.\u0275\u0275defineInjectable({token:de,factory:de.\u0275fac}),(0,te.gn)([(0,ne.Qm)()],de.prototype,"loadAppointment$",void 0),(0,te.gn)([(0,ne.Qm)()],de.prototype,"loadAllAppointments$",void 0);var ce=n(28049);let ue=(()=>{class e{constructor(e,t){this.appointmentsService=e,this.store=t}resolve(e,t){const n=e.params.id;return this.store.pipe((0,l.Ys)((e=>(0,l.P1)(y,t=>t.entities[e]))(n)),(0,E.b)(e=>{e||this.store.dispatch(new d({appointmentId:n}))}),(0,se.h)(e=>!!e),(0,ce.P)())}}return e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275inject(me),s.\u0275\u0275inject(l.yh))},e.\u0275prov=s.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var he=n(40810),fe=n(5559),ge=n(80541),be=n(65476),ve=n(2678),ye=n(10758),xe=n(1398),_e=n(62827),Se=n(10709),Ie=n(2001),we=n(1947),Ae=n(4222);let Ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({providers:[me,ue,xe.e,ve.C,_e.$,ye.N,Ae.u,we.h,k.qu],imports:[[i.ez,X,T.dF,P.EoG,k.u5,P.nKr,P.T2N,P.zyh,P.MfT,P.OA,Z.$,P._WB,P.IIj,P.kmq,P.j7H.forChild(),P.wXm.forChild(),U.ne,ee.R,l.Aw.forFeature("doctors",ge.qf),ne.sQ.forFeature([he.e]),l.Aw.forFeature("patients",be.Sx),ne.sQ.forFeature([fe.a]),l.Aw.forFeature("appointments",b),ne.sQ.forFeature([de]),l.Aw.forFeature("schedules",Ie.V8),ne.sQ.forFeature([Se.R]),k.UX]]}),e})()}}]);