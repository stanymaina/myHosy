!function(){"use strict";function t(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var o,r,i=[],a=!0,s=!1;try{for(e=e.call(t);!(a=(o=e.next()).done)&&(i.push(o.value),!n||i.length!==n);a=!0);}catch(l){s=!0,r=l}finally{try{a||null==e.return||e.return()}finally{if(s)throw r}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return n(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,o=new Array(n);e<n;e++)o[e]=t[e];return o}function e(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function o(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}function r(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[638],{46638:function(n,e,i){i.r(e),i.d(e,{BloodbankModule:function(){return ht}});var a,s=i(38583),l=i(95987),d=i(55477),c=i(23065),u=i(80273),f=((a=f||(f={})).BloodBankRequested="[View BloodBank Page] BloodBank Requested",a.BloodBankLoaded="[BloodBanks API] BloodBank Loaded",a.AllBloodBanksRequested="[BloodBanks Home Page] All BloodBanks Requested",a.AllBloodBanksLoaded="[BloodBanks API] All BloodBanks Loaded",a.BloodBankSaved="[Edit BloodBank Dialog] BloodBank Saved",f),p=function t(n){r(this,t),this.payload=n,this.type=f.BloodBankRequested},h=function t(n){r(this,t),this.payload=n,this.type=f.BloodBankLoaded},b=function t(){r(this,t),this.type=f.AllBloodBanksRequested},B=function t(n){r(this,t),this.payload=n,this.type=f.AllBloodBanksLoaded},m=(0,u.H)(),y=m.getInitialState({allBloodBanksLoaded:!1});function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case f.BloodBankLoaded:return m.addOne(n.payload.bloodBank,t);case f.AllBloodBanksLoaded:return m.setAll(n.payload.bloodBanks,Object.assign(Object.assign({},t),{allBloodBanksLoaded:!0}));case f.BloodBankSaved:return m.updateOne(n.payload.bloodBank,t);default:return t}}var g=m.getSelectors().selectAll,k=(0,c.ZF)("bloodBanks"),w=(0,c.P1)(k,g),D=((0,c.P1)(w,function(t){return t.filter(function(t){return"A+"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"A-"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"B+"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"B-"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"AB+"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"AB-"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"O+"===t.blood_group})}),(0,c.P1)(w,function(t){return t.filter(function(t){return"O-"===t.blood_group})}),(0,c.P1)(k,function(t){return t.allBloodBanksLoaded})),A=i(37716),C=i(54550),j=i(76185),S=function(){var t=function(){function t(n){r(this,t),this.store=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},blood_group:{title:"Blood Group",type:"string"},blood_bags:{title:"Bags",type:"string"},quantity:{title:"Quantity(ml)",type:"string"}}},this.allBloodBanks$=this.store.pipe((0,c.Ys)(w))}return o(t,[{key:"onDeleteConfirm",value:function(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275directiveInject(c.yh))},t.\u0275cmp=A.\u0275\u0275defineComponent({type:t,selectors:[["ngx-bloodbank-index"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(t,n){1&t&&(A.\u0275\u0275elementStart(0,"nb-card"),A.\u0275\u0275elementStart(1,"nb-card-header"),A.\u0275\u0275text(2," Blood Bank Status "),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementStart(3,"nb-card-body"),A.\u0275\u0275elementStart(4,"ng2-smart-table",0),A.\u0275\u0275listener("deleteConfirm",function(t){return n.onDeleteConfirm(t)}),A.\u0275\u0275pipe(5,"async"),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd()),2&t&&(A.\u0275\u0275advance(4),A.\u0275\u0275property("settings",n.settings)("source",A.\u0275\u0275pipeBind1(5,2,n.allBloodBanks$)))},directives:[C.Asz,C.ndF,C.yKW,j.T5],pipes:[s.Ov],styles:[""]}),t}(),_=i(98152),I=function(){var t=function(){function t(n){r(this,t),this.service=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Blood Group",type:"string"},lastName:{title:"Status",type:"string"},username:{title:"Bags",type:"string"}}},this.source=new j.nC;var e=this.service.getData();this.source.load(e)}return o(t,[{key:"onDeleteConfirm",value:function(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275directiveInject(_.B))},t.\u0275cmp=A.\u0275\u0275defineComponent({type:t,selectors:[["ngx-bloodbank-logs"]],decls:5,vars:2,consts:[[3,"settings","source","deleteConfirm"]],template:function(t,n){1&t&&(A.\u0275\u0275elementStart(0,"nb-card"),A.\u0275\u0275elementStart(1,"nb-card-header"),A.\u0275\u0275text(2," Blood Bank Logs "),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementStart(3,"nb-card-body"),A.\u0275\u0275elementStart(4,"ng2-smart-table",0),A.\u0275\u0275listener("deleteConfirm",function(t){return n.onDeleteConfirm(t)}),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd()),2&t&&(A.\u0275\u0275advance(4),A.\u0275\u0275property("settings",n.settings)("source",n.source))},directives:[C.Asz,C.ndF,C.yKW,j.T5],styles:[""]}),t}(),P=i(68307),O=function(){return(t=O||(O={})).DonorRequested="[View Donor Page] Donor Requested",t.DonorLoaded="[Donors API] Donor Loaded",t.AllDonorsRequested="[Donors Home Page] All Donors Requested",t.AllDonorsLoaded="[Donors API] All Donors Loaded",t.DonorSaved="[Edit Donor Dialog] Donor Saved",O;var t}(),L=function t(n){r(this,t),this.payload=n,this.type=O.DonorRequested},R=function t(n){r(this,t),this.payload=n,this.type=O.DonorLoaded},$=function t(){r(this,t),this.type=O.AllDonorsRequested},E=function t(n){r(this,t),this.payload=n,this.type=O.AllDonorsLoaded},q=(0,u.H)(),M=q.getInitialState({allDonorsLoaded:!1});function x(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case O.DonorLoaded:return q.addOne(n.payload.donor,t);case O.AllDonorsLoaded:return q.setAll(n.payload.donors,Object.assign(Object.assign({},t),{allDonorsLoaded:!0}));case O.DonorSaved:return q.updateOne(n.payload.donor,t);default:return t}}var z=q.getSelectors().selectAll,U=(0,c.ZF)("donors"),N=(0,c.P1)(U,z),T=(0,c.P1)(U,function(t){return t.allDonorsLoaded}),F=[{path:"",component:function(){var t=function(){function t(n){var e=this;r(this,t),this.store=n,this.tabs=[{title:"Blood Bank",route:"/0/bloodbank/index"},{title:"Donors",route:"/0/bloodbank/donors"},{title:"Logs",route:"/0/bloodbank/logs"}],this.store.pipe((0,c.Ys)(D),(0,P.b)(function(t){t||e.store.dispatch(new b)})).subscribe(),this.store.pipe((0,c.Ys)(T),(0,P.b)(function(t){t||e.store.dispatch(new $)})).subscribe()}return o(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275directiveInject(c.yh))},t.\u0275cmp=A.\u0275\u0275defineComponent({type:t,selectors:[["ngx-bloodbank"]],decls:4,vars:1,consts:[[1,"row"],[1,"col-12"],["size","small"],["fullWidth","",3,"tabs"]],template:function(t,n){1&t&&(A.\u0275\u0275elementStart(0,"div",0),A.\u0275\u0275elementStart(1,"div",1),A.\u0275\u0275elementStart(2,"nb-card",2),A.\u0275\u0275element(3,"nb-route-tabset",3),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd()),2&t&&(A.\u0275\u0275advance(3),A.\u0275\u0275property("tabs",n.tabs))},directives:[C.Asz,C.l0$],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),t}(),children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:S},{path:"donors",component:function(){var t=function(){function t(n){r(this,t),this.store=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Name",type:"string"},lastName:{title:"Blood Group",type:"string"},username:{title:"Age",type:"string"},email:{title:"Sex",type:"string"},id:{title:"Last Donation",type:"string"},age:{title:"Phone",type:"number"}}},this.allDonors$=this.store.pipe((0,c.Ys)(N))}return o(t,[{key:"onDeleteConfirm",value:function(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275directiveInject(c.yh))},t.\u0275cmp=A.\u0275\u0275defineComponent({type:t,selectors:[["ngx-donor"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(t,n){1&t&&(A.\u0275\u0275elementStart(0,"nb-card"),A.\u0275\u0275elementStart(1,"nb-card-header"),A.\u0275\u0275text(2," Donor's Table "),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementStart(3,"nb-card-body"),A.\u0275\u0275elementStart(4,"ng2-smart-table",0),A.\u0275\u0275listener("deleteConfirm",function(t){return n.onDeleteConfirm(t)}),A.\u0275\u0275pipe(5,"async"),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd(),A.\u0275\u0275elementEnd()),2&t&&(A.\u0275\u0275advance(4),A.\u0275\u0275property("settings",n.settings)("source",A.\u0275\u0275pipeBind1(5,2,n.allDonors$)))},directives:[C.Asz,C.ndF,C.yKW,j.T5],pipes:[s.Ov],styles:[""]}),t}()},{path:"logs",component:I},{path:"**",component:d.w}]}],Y=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=A.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=A.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(F)],l.Bz]}),t}(),H=i(73749),Q=i(46258),G=i(92921),K=i(44519),W=i(55171),J=i(64762),V=i(45887),X=i(19773),Z=i(88002),tt=i(57057),nt=i(45435),et=i(91841),ot=i(486),rt=function t(n,e,o,i,a,s,l,d){r(this,t),this.id=n,this.user_id=e,this.user_name=o,this.blood_group_id=i,this.blood_group=a,this.blood_bags=s,this.blood_bags_quantity=l,this.donation_date=d},it=function(){var t=function(){function t(){r(this,t)}return o(t,[{key:"adapt",value:function(t){return new rt(t.id,t.user_id,t.user.first_name+" "+t.user.other_name,t.blood_group_id,t.bloodGroup.blood_group,t.blood_bags,t.blood_bags_quantity,t.donation_date)}}]),t}();return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=A.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),at=function(){var t=function(){function t(n,e,o){r(this,t),this.http=n,this.jarwis=e,this.adapter=o}return o(t,[{key:"findDonorById",value:function(t){return this.http.get(this.jarwis.apiUrl+"/blood-donors/".concat(t))}},{key:"findAllDonors",value:function(){var t=this;return this.jarwis.getURI("blood-donors").pipe((0,Z.U)(function(n){return n.data.map(function(n){return t.adapter.adapt(n)})}))}},{key:"saveDonor",value:function(t,n){return this.http.put("/api/blood-donors/"+t,n)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275inject(et.eN),A.\u0275\u0275inject(ot.R),A.\u0275\u0275inject(it))},t.\u0275prov=A.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),st=function n(e,o,i){var a=this;r(this,n),this.actions$=e,this.donorsService=o,this.store=i,this.loadDonor$=this.actions$.pipe((0,V.l4)(O.DonorRequested),(0,X.zg)(function(t){return a.donorsService.findDonorById(t.payload.donorId)}),(0,Z.U)(function(t){return new R({donor:t})})),this.loadAllDonors$=this.actions$.pipe((0,V.l4)(O.AllDonorsRequested),(0,tt.M)(this.store.pipe((0,c.Ys)(T))),(0,nt.h)(function(n){return!t(n,2)[1]}),(0,X.zg)(function(){return a.donorsService.findAllDonors()}),(0,Z.U)(function(t){return new E({donors:t})}))};st.\u0275fac=function(t){return new(t||st)(A.\u0275\u0275inject(V.eX),A.\u0275\u0275inject(at),A.\u0275\u0275inject(c.yh))},st.\u0275prov=A.\u0275\u0275defineInjectable({token:st,factory:st.\u0275fac}),(0,J.gn)([(0,V.Qm)()],st.prototype,"loadDonor$",void 0),(0,J.gn)([(0,V.Qm)()],st.prototype,"loadAllDonors$",void 0);var lt=i(91622),dt=function(){var t=function(){function t(n,e,o){r(this,t),this.http=n,this.Token=e,this.jarwis=o}return o(t,[{key:"findBloodBankById",value:function(t){return this.http.get(this.jarwis.apiUrl+"/blood-bank/".concat(t))}},{key:"findAllBloodBanks",value:function(){return this.jarwis.getURI("blood-bank").pipe((0,Z.U)(function(t){return t.data}))}},{key:"saveBloodBank",value:function(t,n){return this.http.put("/api/blood-bank/"+t,n)}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275inject(et.eN),A.\u0275\u0275inject(lt.B),A.\u0275\u0275inject(ot.R))},t.\u0275prov=A.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),ct=function n(e,o,i){var a=this;r(this,n),this.actions$=e,this.bloodBanksService=o,this.store=i,this.loadBloodBank$=this.actions$.pipe((0,V.l4)(f.BloodBankRequested),(0,X.zg)(function(t){return a.bloodBanksService.findBloodBankById(t.payload.bloodBankId)}),(0,Z.U)(function(t){return new h({bloodBank:t})})),this.loadAllBloodBanks$=this.actions$.pipe((0,V.l4)(f.AllBloodBanksRequested),(0,tt.M)(this.store.pipe((0,c.Ys)(D))),(0,nt.h)(function(n){return!t(n,2)[1]}),(0,X.zg)(function(){return a.bloodBanksService.findAllBloodBanks()}),(0,Z.U)(function(t){return new B({bloodBanks:t})}))};ct.\u0275fac=function(t){return new(t||ct)(A.\u0275\u0275inject(V.eX),A.\u0275\u0275inject(dt),A.\u0275\u0275inject(c.yh))},ct.\u0275prov=A.\u0275\u0275defineInjectable({token:ct,factory:ct.\u0275fac}),(0,J.gn)([(0,V.Qm)()],ct.prototype,"loadBloodBank$",void 0),(0,J.gn)([(0,V.Qm)()],ct.prototype,"loadAllBloodBanks$",void 0);var ut=i(28049),ft=function(){var t=function(){function t(n,e){r(this,t),this.bloodBanksService=n,this.store=e}return o(t,[{key:"resolve",value:function(t,n){var e,o=this,r=t.params.id;return this.store.pipe((0,c.Ys)((e=r,(0,c.P1)(k,function(t){return t.entities[e]}))),(0,P.b)(function(t){t||o.store.dispatch(new p({bloodBankId:r}))}),(0,nt.h)(function(t){return!!t}),(0,ut.P)())}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275inject(dt),A.\u0275\u0275inject(c.yh))},t.\u0275prov=A.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),pt=function(){var t=function(){function t(n,e){r(this,t),this.donorsService=n,this.store=e}return o(t,[{key:"resolve",value:function(t,n){var e,o=this,r=t.params.id;return this.store.pipe((0,c.Ys)((e=r,(0,c.P1)(U,function(t){return t.entities[e]}))),(0,P.b)(function(t){t||o.store.dispatch(new L({donorId:r}))}),(0,nt.h)(function(t){return!!t}),(0,ut.P)())}}]),t}();return t.\u0275fac=function(n){return new(n||t)(A.\u0275\u0275inject(at),A.\u0275\u0275inject(c.yh))},t.\u0275prov=A.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),ht=function(){var t=function t(){r(this,t)};return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=A.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=A.\u0275\u0275defineInjector({providers:[dt,ft,at,pt],imports:[[s.ez,Y,K.MiscellaneousModule,C.nKr,C.T2N,C.zyh,C.MfT,C.HKp,H.$,C.j5J,Q.J7,C.EoG,C._WB,j.ne,W.R,G.O,c.Aw.forFeature("bloodBanks",v),V.sQ.forFeature([ct]),c.Aw.forFeature("donors",x),V.sQ.forFeature([st])]]}),t}()}}])}();