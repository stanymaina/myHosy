!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,o,r=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(i=n.next()).done)&&(r.push(i.value),!t||r.length!==t);a=!0);}catch(l){s=!0,o=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return r}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[615],{79615:function(t,i,r){r.r(i),r.d(i,{AppointmentModule:function(){return Oe}});var a,s=r(38583),l=r(95987),p=r(55477),m=r(37716),d=((a=function(){function e(){n(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}()).\u0275fac=function(e){return new(e||a)},a.\u0275cmp=m.\u0275\u0275defineComponent({type:a,selectors:[["ngx-appointment-calender"]],decls:2,vars:0,template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"p"),m.\u0275\u0275text(1,"appointment-calender works!"),m.\u0275\u0275elementEnd())},styles:[""]}),a),c=r(23065),u=r(80273),f=function(){return(e=f||(f={})).AppointmentRequested="[View Appointment Page] Appointment Requested",e.AppointmentLoaded="[Appointments API] Appointment Loaded",e.AllAppointmentsRequested="[Appointments Home Page] All Appointments Requested",e.AllAppointmentsLoaded="[Appointments API] All Appointments Loaded",e.AppointmentSaved="[Edit Appointment Dialog] Appointment Saved",f;var e}(),h=function e(t){n(this,e),this.payload=t,this.type=f.AppointmentRequested},v=function e(t){n(this,e),this.payload=t,this.type=f.AppointmentLoaded},g=function e(){n(this,e),this.type=f.AllAppointmentsRequested},b=function e(t){n(this,e),this.payload=t,this.type=f.AllAppointmentsLoaded},y=(0,u.H)(),x=y.getInitialState({allAppointmentsLoaded:!1});function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f.AppointmentLoaded:return y.addOne(t.payload.appointment,e);case f.AllAppointmentsLoaded:return y.setAll(t.payload.appointments,Object.assign(Object.assign({},e),{allAppointmentsLoaded:!0}));case f.AppointmentSaved:return y.updateOne(t.payload.appointment,e);default:return e}}var S=y.getSelectors().selectAll,w=(0,c.ZF)("appointments"),I=(0,c.P1)(w,S),A=(0,c.P1)(I,function(e){return e.filter(function(e){return"Treated"===e.appointment_status})}),k=(0,c.P1)(I,function(e){return e.filter(function(e){return"Confirmed"===e.appointment_status})}),C=(0,c.P1)(I,function(e){return e.filter(function(e){return"Requested"===e.appointment_status})}),E=(0,c.P1)(I,function(e){return e.filter(function(e){return"Cancelled"===e.appointment_status})}),P=(0,c.P1)(I,function(e){return e.filter(function(e){return"Pending Confirmation"===e.appointment_status})}),O=(0,c.P1)(w,function(e){return e.allAppointmentsLoaded}),D=r(68307),N=r(3679),j=r(54550),M=r(16738),T=r(18541),R=r(4242),$=r(65890),F=r(486),q=r(61758);function B(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"nb-option",25),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;m.\u0275\u0275property("value",n.value),m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(n.value)}}function Y(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"div",3),m.\u0275\u0275elementStart(1,"label",23),m.\u0275\u0275text(2,"Department"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(3,"br"),m.\u0275\u0275elementStart(4,"nb-select",24),m.\u0275\u0275template(5,B,2,2,"nb-option",15),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()),2&e){var n=m.\u0275\u0275nextContext();m.\u0275\u0275advance(5),m.\u0275\u0275property("ngForOf",n.departments)}}function V(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"nb-option",25),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;m.\u0275\u0275property("value",n.id),m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(n.name)}}function z(e,t){if(1&e){var n=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",3),m.\u0275\u0275elementStart(1,"label",23),m.\u0275\u0275text(2,"Doctor"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(3,"br"),m.\u0275\u0275elementStart(4,"nb-select",26),m.\u0275\u0275listener("selectedChange",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().selectedDoctor=e})("selectedChange",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDoctorChoice(e)}),m.\u0275\u0275template(5,V,2,2,"nb-option",15),m.\u0275\u0275pipe(6,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()}if(2&e){var i=m.\u0275\u0275nextContext();m.\u0275\u0275advance(4),m.\u0275\u0275property("selected",i.selectedDoctor),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngForOf",m.\u0275\u0275pipeBind1(6,2,i.allDoctors$))}}function L(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"nb-option",25),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;m.\u0275\u0275property("value",t.index),m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(n.range)}}function U(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"nb-option",25),m.\u0275\u0275text(1),m.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;m.\u0275\u0275property("value",n.id),m.\u0275\u0275advance(1),m.\u0275\u0275textInterpolate(n.name)}}var W=function(){return{extraPlugins:"divarea",height:"120"}},Q=function(){var e=function(){function e(t,i,o,r,a){n(this,e),this.jarwis=t,this.store=i,this.formBuilder=o,this.toastrService=r,this.dateService=a,this.makeAppointmentForm=new N.cw({departmentId:new N.NI("",N.kI.required),dateTime:new N.NI("",N.kI.required),timeSlots:new N.NI("",N.kI.required),patientID:new N.NI("",N.kI.required),doctorID:new N.NI("",N.kI.required),appointmentRemark:new N.NI("",N.kI.required)}),this.sendAppointmentForm=new N.cw({departmentId:new N.NI("",N.kI.required),dateTime:new N.NI("",N.kI.required),timeSlots:new N.NI("",N.kI.required),patientID:new N.NI("",N.kI.required),doctorID:new N.NI("",N.kI.required),appointmentRemark:new N.NI("",N.kI.required)}),this.tt=0,this.b_times=[],this.s_times=[],this.schedule=[],this.appointments=[],this.date=new Date,this.step=40,this.selectedBooking="doctor",this.newItemEvent=new m.EventEmitter,this.appointments_start_times=[],this.doctor_app=!0,this.departments=[{value:"Dental"},{value:"Laboratory"},{value:"Blood Donor"},{value:"Pharmacy"}],this.allDoctors$=this.store.pipe((0,c.Ys)(T.Bv)),this.allPatients$=this.store.pipe((0,c.Ys)(R.QD)),this.allSchedules$=this.store.pipe((0,c.Ys)($.mg)),this.allAppointments$=this.store.pipe((0,c.Ys)(I)),this.min=this.dateService.today(),this.max=this.dateService.addMonth(this.dateService.today(),1),this.dateTime=new N.NI("",[N.kI.required]),this.timeSlots=new N.NI("",[N.kI.required]),this.patientID=new N.NI("",[N.kI.required]),this.doctorID=new N.NI("",[N.kI.required]),this.appointmentRemark=new N.NI("",[N.kI.required]),this.makeAppointmentForm=o.group({DateTime:this.dateTime,TimeSlots:this.timeSlots,patientId:this.patientID,doctorId:this.doctorID,AppointmentRemark:this.appointmentRemark})}return o(e,[{key:"ngOnInit",value:function(){}},{key:"onDoctorChoice",value:function(e){var t;console.log(e),this.employee_id=e,this.store.pipe((0,c.Ys)((0,$.AK)(e))).subscribe(function(e){t=e}),console.log(t),this.store.pipe((0,c.Ys)((0,$.sG)(e))).subscribe(function(e){e=e,console.log(e),e.meals.forEach(function(e){var t=[];t.push(e),t.map(function(e){return Object.assign({},e,{status:""})})[0].status=e.state})}),console.log(t)}},{key:"onDateChange",value:function(e){var t,n=this;""===this.makeAppointmentForm.value.doctorId&&this.toastrService.show("","Kindly choose a Doctor",{status:"info",destroyByClick:!0,duration:2e3,hasIcon:!0,position:j.fe3.TOP_RIGHT,preventDuplicates:!1}),console.log(e),this.booking_date=M(new Date(e)).format("y-MM-DD"),this.dateQuery=this.formBuilder.group({date:this.booking_date}),this.jarwis.postURI("appointments/"+this.makeAppointmentForm.value.doctorId,this.dateQuery.value).subscribe(function(e){console.log(e.data),""!==(t=e.data).schedule&&(n.schedule=t.schedule,""!==t.appointments&&(n.appointments=t.appointments,console.log(n.appointments)),n.dis_times(n.booking_date,n.schedule,n.appointments))},function(e){console.log(e),e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}},{key:"dis_times",value:function(){var e=this,t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0,i=JSON.parse('{"interval":[]}'),o=t.duration,r=t.end_time,a=t.start_time.split(":"),s=r.split(":"),l=60*+a[0]+ +a[1],p=60*+s[0]+ +s[1];this.tt=l,console.log(l),console.log(p);var m=["AM","PM"];console.log(JSON.stringify(n).length),Object.keys(i),this.appointments_start_times=[];for(var d=0;d<Object.keys(n).length;d++)this.appointments_start_times.push(n[d].s_time);console.log(this.appointments_start_times);for(var c=0;Number(this.tt)<Number(p);c++){var u=Math.floor(this.tt/60),f=this.tt%60;if(this.s_times[c]=("0"+u%12).slice(-2)+":"+("0"+f).slice(-2)+" "+m[Math.floor(u/12)],c>0){var h=!0;this.appointments_start_times.forEach(function(t){if(h=!0,Number(e.tt)<Number(i)&&Number(e.tt)+o<Number(i)||Number(e.tt)>Number(i)&&Number(e.tt)+o<Number(i))h=!0;else{var n=t.split(":"),i=60*+n[0]+ +n[1];console.log(i),Number(e.tt)>=Number(i)&&Number(i)+Number(o)<=Number(e.tt)+Number(o)?(console.log("Booked"),h=!1):h=!0}}),this.available_time_slots=this.s_times[c-1]+" - "+this.s_times[c],console.log(h),i.interval.push({start:this.s_times[c-1],end:this.s_times[c],range:this.available_time_slots}),console.log("new",i.interval),this.available_time_slots_array=i.interval}this.tt=Number(this.tt)+Number(o)}console.log(this.available_time_slots_array)}},{key:"onTimeChoice",value:function(e){console.log(this.available_time_slots_array[e]),this.app_start_time=this.available_time_slots_array[e].start,this.app_end_time=this.available_time_slots_array[e].end}},{key:"addAppointment",value:function(){var e=this;this.sendAppointmentForm=this.formBuilder.group({doctor_id:this.makeAppointmentForm.value.doctorId,patient_id:this.makeAppointmentForm.value.patientId,start_time:this.app_start_time,end_time:this.app_end_time,date:this.booking_date}),this.jarwis.postURI("appointments",this.sendAppointmentForm.value).subscribe(function(t){console.log(t),void 0!==t.data.id?t.data.id&&(e.toastrService.show(t.data.date,"Appointment created",{status:"success",destroyByClick:!0,duration:2e3,hasIcon:!0,position:j.fe3.TOP_RIGHT,preventDuplicates:!1}),e.makeAppointmentForm.reset(),e.newItemEvent.emit({id:t.data})):(e.toastrService.show(t.data.message,"Kindly review entered data",{status:"danger",destroyByClick:!0,duration:2e3,hasIcon:!0,position:j.fe3.TOP_RIGHT,preventDuplicates:!1}),e.newItemEvent.emit({id:null}))})}},{key:"changeAllocation",value:function(e){console.log(e),this.doctor_app="doctor"===e}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.\u0275\u0275directiveInject(F.R),m.\u0275\u0275directiveInject(c.yh),m.\u0275\u0275directiveInject(N.qu),m.\u0275\u0275directiveInject(j.quB),m.\u0275\u0275directiveInject(j.uui))},e.\u0275cmp=m.\u0275\u0275defineComponent({type:e,selectors:[["ngx-make-appointment-form"]],outputs:{newItemEvent:"newItemEvent"},decls:47,vars:14,consts:[[1,"scrollable-container"],[1,"col-12"],[1,"row",3,"formGroup"],[1,"col-6","form-group"],["for","InputTemplate",1,"label"],["fullWidth","",3,"selected","selectedChange"],["value","doctor"],["value","department"],["class","col-6 form-group",4,"ngIf"],["for","InputEmail1",1,"label"],["nbInput","","fullWidth","","placeholder","Pick Date","formControlName","DateTime",3,"nbDatepicker","ngModelChange"],[3,"min","max"],["appointmentDatePicker",""],["formControlName","TimeSlots","fullWidth","",3,"ngModelChange"],["selected",""],[3,"value",4,"ngFor","ngForOf"],["for","InputPatient",1,"label"],["formControlName","patientId","fullWidth","",3,"selected","selectedChange"],[1,"col-12","form-group"],["for","InputAppointmentRemark",1,"label"],["formControlName","AppointmentRemark",3,"config"],[1,"col-4","form-group"],["type","submit","nbButton","","status","info",3,"click"],["for","InputRefdByDoctor",1,"label"],["formControlName","departmentId","fullWidth",""],[3,"value"],["formControlName","doctorId","fullWidth","",3,"selected","selectedChange"]],template:function(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"span",0),m.\u0275\u0275elementStart(1,"nb-card"),m.\u0275\u0275elementStart(2,"nb-card-header"),m.\u0275\u0275text(3," Add Appointment Form"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(4,"nb-card-body",1),m.\u0275\u0275elementStart(5,"div",2),m.\u0275\u0275elementStart(6,"div",3),m.\u0275\u0275elementStart(7,"label",4),m.\u0275\u0275text(8,"Booking To:"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(9,"br"),m.\u0275\u0275elementStart(10,"nb-select",5),m.\u0275\u0275listener("selectedChange",function(e){return t.selectedBooking=e})("selectedChange",function(e){return t.changeAllocation(e)}),m.\u0275\u0275elementStart(11,"nb-option",6),m.\u0275\u0275text(12,"Doctor"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(13,"nb-option",7),m.\u0275\u0275text(14,"Department"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(15,Y,6,1,"div",8),m.\u0275\u0275template(16,z,7,4,"div",8),m.\u0275\u0275elementStart(17,"div",3),m.\u0275\u0275elementStart(18,"label",9),m.\u0275\u0275text(19,"Date & Time"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(20,"br"),m.\u0275\u0275elementStart(21,"input",10),m.\u0275\u0275listener("ngModelChange",function(e){return t.onDateChange(e)}),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(22,"nb-datepicker",11,12),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(24,"div",3),m.\u0275\u0275elementStart(25,"label",4),m.\u0275\u0275text(26,"Time Slots"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(27,"br"),m.\u0275\u0275elementStart(28,"nb-select",13),m.\u0275\u0275listener("ngModelChange",function(e){return t.onTimeChoice(e)}),m.\u0275\u0275elementStart(29,"nb-option",14),m.\u0275\u0275text(30,"Time Slot"),m.\u0275\u0275elementEnd(),m.\u0275\u0275template(31,L,2,2,"nb-option",15),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(32,"div",3),m.\u0275\u0275elementStart(33,"label",16),m.\u0275\u0275text(34,"Patient"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(35,"br"),m.\u0275\u0275elementStart(36,"nb-select",17),m.\u0275\u0275listener("selectedChange",function(e){return t.selectedPatient=e}),m.\u0275\u0275template(37,U,2,2,"nb-option",15),m.\u0275\u0275pipe(38,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(39,"div",18),m.\u0275\u0275elementStart(40,"label",19),m.\u0275\u0275text(41,"Appointment Remark"),m.\u0275\u0275elementEnd(),m.\u0275\u0275element(42,"br"),m.\u0275\u0275element(43,"ckeditor",20),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(44,"div",21),m.\u0275\u0275elementStart(45,"button",22),m.\u0275\u0275listener("click",function(){return t.addAppointment()}),m.\u0275\u0275text(46," Submit "),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()),2&e){var n=m.\u0275\u0275reference(23);m.\u0275\u0275advance(5),m.\u0275\u0275property("formGroup",t.makeAppointmentForm),m.\u0275\u0275advance(5),m.\u0275\u0275property("selected",t.selectedBooking),m.\u0275\u0275advance(5),m.\u0275\u0275property("ngIf",!t.doctor_app),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",t.doctor_app),m.\u0275\u0275advance(5),m.\u0275\u0275property("nbDatepicker",n),m.\u0275\u0275advance(1),m.\u0275\u0275property("min",t.min)("max",t.max),m.\u0275\u0275advance(9),m.\u0275\u0275property("ngForOf",t.available_time_slots_array),m.\u0275\u0275advance(5),m.\u0275\u0275property("selected",t.selectedPatient),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngForOf",m.\u0275\u0275pipeBind1(38,11,t.allPatients$)),m.\u0275\u0275advance(6),m.\u0275\u0275property("config",m.\u0275\u0275pureFunction0(13,W))}},directives:[j.Asz,j.ndF,j.yKW,N.JL,N.sg,j.rs,j.q51,s.O5,j.h8i,N.Fj,j.$kf,N.JJ,N.u,j.B4C,s.sg,q.ue,j.DPz],pipes:[s.Ov],styles:[""]}),e}(),G=r(68020),H=r(46655),K=r(76185);function J(e,t){if(1&e){var n=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1),m.\u0275\u0275elementStart(1,"div",2),m.\u0275\u0275elementStart(2,"nb-card",3),m.\u0275\u0275elementStart(3,"nb-card-header"),m.\u0275\u0275text(4," Appointment's Table "),m.\u0275\u0275elementStart(5,"button",4),m.\u0275\u0275listener("click",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().openAddReport(e,"add")}),m.\u0275\u0275text(6," Add Appointment "),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"nb-card-body"),m.\u0275\u0275elementStart(8,"nb-tabset",5),m.\u0275\u0275elementStart(9,"nb-tab",6),m.\u0275\u0275elementStart(10,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(11,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(12,"nb-tab",8),m.\u0275\u0275elementStart(13,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(14,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(15,"nb-tab",9),m.\u0275\u0275elementStart(16,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(17,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(18,"nb-tab",10),m.\u0275\u0275elementStart(19,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(20,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(21,"nb-tab",11),m.\u0275\u0275elementStart(22,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(23,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(24,"nb-tab",12),m.\u0275\u0275elementStart(25,"ng2-smart-table",7),m.\u0275\u0275listener("deleteConfirm",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().onDeleteConfirm(e)}),m.\u0275\u0275pipe(26,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()}if(2&e){var i=m.\u0275\u0275nextContext();m.\u0275\u0275advance(10),m.\u0275\u0275property("settings",i.for_all_settings)("source",m.\u0275\u0275pipeBind1(11,12,i.allAppointments$)),m.\u0275\u0275advance(3),m.\u0275\u0275property("settings",i.settings)("source",m.\u0275\u0275pipeBind1(14,14,i.pendingAppointments$)),m.\u0275\u0275advance(3),m.\u0275\u0275property("settings",i.settings)("source",m.\u0275\u0275pipeBind1(17,16,i.confirmedAppointments$)),m.\u0275\u0275advance(3),m.\u0275\u0275property("settings",i.settings)("source",m.\u0275\u0275pipeBind1(20,18,i.treatedAppointments$)),m.\u0275\u0275advance(3),m.\u0275\u0275property("settings",i.settings)("source",m.\u0275\u0275pipeBind1(23,20,i.cancelledAppointments$)),m.\u0275\u0275advance(3),m.\u0275\u0275property("settings",i.settings)("source",m.\u0275\u0275pipeBind1(26,22,i.requestedAppointments$))}}function X(e,t){if(1&e&&(m.\u0275\u0275elementStart(0,"div",14),m.\u0275\u0275elementStart(1,"div",15),m.\u0275\u0275elementStart(2,"div",16),m.\u0275\u0275elementStart(3,"div",17),m.\u0275\u0275elementStart(4,"div",18),m.\u0275\u0275elementStart(5,"h5",19),m.\u0275\u0275text(6),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"p",20),m.\u0275\u0275text(8),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(9,"div",21),m.\u0275\u0275element(10,"img",22),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(11,"div",17),m.\u0275\u0275elementStart(12,"div",18),m.\u0275\u0275elementStart(13,"h5",19),m.\u0275\u0275text(14),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(15,"p",20),m.\u0275\u0275text(16,"FIRST VISIT"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(17,"div",23),m.\u0275\u0275element(18,"div",24),m.\u0275\u0275element(19,"div",25),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(20,"div",26),m.\u0275\u0275elementStart(21,"div",27),m.\u0275\u0275elementStart(22,"h5",28),m.\u0275\u0275text(23),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(24,"span",29),m.\u0275\u0275text(25,"20 mins"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(26,"div",23),m.\u0275\u0275elementStart(27,"p",30),m.\u0275\u0275elementStart(28,"strong",31),m.\u0275\u0275text(29,"Ksh 0.00"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(30,"div",32),m.\u0275\u0275elementStart(31,"button",33),m.\u0275\u0275text(32,"Reschedule"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(33,"button",34),m.\u0275\u0275text(34,"Approve"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;m.\u0275\u0275advance(6),m.\u0275\u0275textInterpolate2("",n.s_time," - ",n.e_time,""),m.\u0275\u0275advance(2),m.\u0275\u0275textInterpolate(n.date),m.\u0275\u0275advance(2),m.\u0275\u0275propertyInterpolate1("src","http://localhost:8000/uploads/images/users/",n.employee.user.usr_img,"",m.\u0275\u0275sanitizeUrl),m.\u0275\u0275advance(4),m.\u0275\u0275textInterpolate2("",n.employee.user.first_name," ",n.employee.user.other_name,""),m.\u0275\u0275advance(9),m.\u0275\u0275textInterpolate(n.remarks)}}function Z(e,t){if(1&e){var n=m.\u0275\u0275getCurrentView();m.\u0275\u0275elementStart(0,"div",1),m.\u0275\u0275elementStart(1,"div",2),m.\u0275\u0275elementStart(2,"nb-card",3),m.\u0275\u0275elementStart(3,"nb-card-header"),m.\u0275\u0275text(4," My Appointments "),m.\u0275\u0275elementStart(5,"button",4),m.\u0275\u0275listener("click",function(e){return m.\u0275\u0275restoreView(n),m.\u0275\u0275nextContext().openAddReport(e,"add")}),m.\u0275\u0275text(6," Add Appointment "),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementStart(7,"nb-card-body"),m.\u0275\u0275elementStart(8,"div",1),m.\u0275\u0275template(9,X,35,7,"div",13),m.\u0275\u0275pipe(10,"async"),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd(),m.\u0275\u0275elementEnd()}if(2&e){var i=m.\u0275\u0275nextContext();m.\u0275\u0275advance(9),m.\u0275\u0275property("ngForOf",m.\u0275\u0275pipeBind1(10,1,i.allAppointments$))}}var ee=function(){var e=function(){function e(t,i,o){var r=this;n(this,e),this.windowService=t,this.store=i,this.dialogService=o,this.for_all_settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"},appointment_status:{title:"Status",type:"string"}}},this.settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"}}},this.simple_show=!1,localStorage.getItem("role");var a=localStorage.getItem("roles");console.log(a),("Patient"===a||"User"===a)&&(this.simple_show=!0),this.store.pipe((0,c.Ys)(T.Zy),(0,D.b)(function(e){e||r.store.dispatch(new G.dP)})).subscribe(),this.store.pipe((0,c.Ys)(R.AU),(0,D.b)(function(e){e||r.store.dispatch(new H.yi)})).subscribe(),this.store.pipe((0,c.Ys)(O),(0,D.b)(function(e){e||r.store.dispatch(new g)})).subscribe(),this.allDoctors$=this.store.pipe((0,c.Ys)(T.Bv)),this.allPatients$=this.store.pipe((0,c.Ys)(R.QD)),this.allAppointments$=this.store.pipe((0,c.Ys)(I)),this.pendingAppointments$=this.store.pipe((0,c.Ys)(P)),this.confirmedAppointments$=this.store.pipe((0,c.Ys)(k)),this.treatedAppointments$=this.store.pipe((0,c.Ys)(A)),this.cancelledAppointments$=this.store.pipe((0,c.Ys)(E)),this.requestedAppointments$=this.store.pipe((0,c.Ys)(C))}return o(e,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}},{key:"openAddReport",value:function(e,t){this.openWindow(Q,e.data,t)}},{key:"openWindow",value:function(e,t,n){this.windowService.open(e,{context:{text:"some text to pass into template",data:t,type:n}})}},{key:"open",value:function(){this.dialogService.open(Q,{})}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.\u0275\u0275directiveInject(j.eJ1),m.\u0275\u0275directiveInject(c.yh),m.\u0275\u0275directiveInject(j.Gln))},e.\u0275cmp=m.\u0275\u0275defineComponent({type:e,selectors:[["ngx-appointment-list"]],decls:2,vars:2,consts:[["class","row",4,"ngIf"],[1,"row"],[1,"col-12"],["size","small"],["type","submit","nbButton","","status","danger",3,"click"],["fullWidth",""],["tabTitle","All"],[3,"settings","source","deleteConfirm"],["tabTitle","Pending Confimation"],["tabTitle","Confirmed"],["tabTitle","Treated"],["tabTitle","Cancelled"],["tabTitle","Requested"],["class","col-md-6 col-lg-4 col-xxxl-3 container-fluid px-1 py-5 mx-auto",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","col-xxxl-3","container-fluid","px-1","py-5","mx-auto"],[1,"row","d-flex","justify-content-center"],[1,"card"],[1,"row","d-flex","justify-content-between","mx-2","px-3","card-strip"],[1,"left","d-flex","flex-column"],[1,"mb-1"],[1,"text-muted","mb-1","sm-text"],[1,"right"],[3,"src"],[1,"right","d-flex"],[1,"fa","fa-comment-o"],[1,"fa","fa-phone"],[1,"row","justify-content-between","mx-2","px-3","card-strip"],[1,"left","d-flex"],[1,"mb-1","text-muted"],[1,"time"],[1,"mb-0","price"],[1,"text-muted"],[1,"row","d-flex","justify-content-between","mx-2","px-3"],[1,"btn","btn-white"],[1,"btn","btn-purple"]],template:function(e,t){1&e&&(m.\u0275\u0275template(0,J,27,24,"div",0),m.\u0275\u0275template(1,Z,11,3,"div",0)),2&e&&(m.\u0275\u0275property("ngIf",!t.simple_show),m.\u0275\u0275advance(1),m.\u0275\u0275property("ngIf",t.simple_show))},directives:[s.O5,j.Asz,j.ndF,j.DPz,j.yKW,j.kyn,j.TR4,K.T5,s.sg],pipes:[s.Ov],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}body[_ngcontent-%COMP%]{color:#000;overflow-x:hidden;height:100%;background-color:#d1c4e9;background-repeat:no-repeat}.card[_ngcontent-%COMP%]{margin:60px auto;border:none!important;width:450px}@media screen and (max-width: 768px){.card[_ngcontent-%COMP%]{width:350px}}.card-strip[_ngcontent-%COMP%]{border-bottom:1px solid lightgray;padding-top:20px;padding-bottom:20px}img[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:50%;cursor:pointer}.sm-text[_ngcontent-%COMP%]{font-size:15px}.fa[_ngcontent-%COMP%]{font-size:30px;padding:10px}.fa-comment-o[_ngcontent-%COMP%]{color:gray;cursor:pointer}.fa-phone[_ngcontent-%COMP%]{color:#1e88e5;padding-left:20px;cursor:pointer}.time[_ngcontent-%COMP%]{border:1px lightgray solid;border-radius:5px;font-weight:bold;padding:1px 8px;margin:0 6px}.price[_ngcontent-%COMP%]{font-size:20px}.text-muted[_ngcontent-%COMP%]{color:#bdbdbd!important}button[_ngcontent-%COMP%]:focus{box-shadow:none!important;outline-width:0}.btn[_ngcontent-%COMP%]{width:48%;height:55px;margin:20px 0;font-weight:bold;letter-spacing:1px}.btn-white[_ngcontent-%COMP%]{background-color:#fff;color:#000;border:1px gray solid}.btn-white[_ngcontent-%COMP%]:hover{background-color:#d3d3d3;color:#000}.btn-purple[_ngcontent-%COMP%]{background-color:#5e35b1;color:#fff;border:1px #5E35B1 solid}.btn-purple[_ngcontent-%COMP%]:hover{background-color:#311b92;color:#fff}"]}),e}(),te=[{path:"",component:ee,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"add",component:Q},{path:"all",component:ee},{path:"upcoming",component:function(){var e=function(){function e(){n(this,e)}return o(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=m.\u0275\u0275defineComponent({type:e,selectors:[["ngx-appointment-upcoming"]],decls:2,vars:0,template:function(e,t){1&e&&(m.\u0275\u0275elementStart(0,"p"),m.\u0275\u0275text(1,"appointment-upcoming works!"),m.\u0275\u0275elementEnd())},styles:[""]}),e}()},{path:"calender",component:d},{path:"**",component:p.w}]}],ne=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=m.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(te)],l.Bz]}),e}(),ie=r(73749),oe=r(55171),re=r(64762),ae=r(45887),se=r(19773),le=r(88002),pe=r(57057),me=r(45435),de=r(91841),ce=function e(t,i,o,r,a,s,l,p,m,d,c,u){n(this,e),this.id=t,this.employee=i,this.doctor_id=o,this.patient=r,this.patient_id=a,this.doctor_name=s,this.patient_name=l,this.remarks=p,this.date=m,this.s_time=d,this.e_time=c,this.appointment_status=u},ue=function(){var e=function(){function e(){n(this,e)}return o(e,[{key:"adapt",value:function(e){return new ce(e.id,e.employee,e.employee_id,e.patient,e.patient_id,"Dr. ".concat(e.employee.user.first_name," ").concat(e.employee.user.other_name),e.patient.user.first_name+" "+e.patient.user.other_name,e.remarks,e.date,e.s_time,e.e_time,e.appointment_status)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=m.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),fe=function(){var e=function(){function e(t,i,o){n(this,e),this.http=t,this.adapter=i,this.jarwis=o}return o(e,[{key:"findAppointmentById",value:function(e){return this.http.get(this.jarwis.apiUrl+"/appointments/".concat(e))}},{key:"findAllAppointments",value:function(){var e=this;return this.jarwis.getURI("appointments").pipe((0,le.U)(function(t){return t.data.map(function(t){return e.adapter.adapt(t)})}))}},{key:"saveAppointment",value:function(e,t){return this.http.put("/api/appointments/"+e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.\u0275\u0275inject(de.eN),m.\u0275\u0275inject(ue),m.\u0275\u0275inject(F.R))},e.\u0275prov=m.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),he=function t(i,o,r){var a=this;n(this,t),this.actions$=i,this.appointmentsService=o,this.store=r,this.loadAppointment$=this.actions$.pipe((0,ae.l4)(f.AppointmentRequested),(0,se.zg)(function(e){return a.appointmentsService.findAppointmentById(e.payload.appointmentId)}),(0,le.U)(function(e){return new v({appointment:e})})),this.loadAllAppointments$=this.actions$.pipe((0,ae.l4)(f.AllAppointmentsRequested),(0,pe.M)(this.store.pipe((0,c.Ys)(O))),(0,me.h)(function(t){return!e(t,2)[1]}),(0,se.zg)(function(){return a.appointmentsService.findAllAppointments()}),(0,le.U)(function(e){return new b({appointments:e})}))};he.\u0275fac=function(e){return new(e||he)(m.\u0275\u0275inject(ae.eX),m.\u0275\u0275inject(fe),m.\u0275\u0275inject(c.yh))},he.\u0275prov=m.\u0275\u0275defineInjectable({token:he,factory:he.\u0275fac}),(0,re.gn)([(0,ae.Qm)()],he.prototype,"loadAppointment$",void 0),(0,re.gn)([(0,ae.Qm)()],he.prototype,"loadAllAppointments$",void 0);var ve=r(28049),ge=function(){var e=function(){function e(t,i){n(this,e),this.appointmentsService=t,this.store=i}return o(e,[{key:"resolve",value:function(e,t){var n,i=this,o=e.params.id;return this.store.pipe((0,c.Ys)((n=o,(0,c.P1)(w,function(e){return e.entities[n]}))),(0,D.b)(function(e){e||i.store.dispatch(new h({appointmentId:o}))}),(0,me.h)(function(e){return!!e}),(0,ve.P)())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(m.\u0275\u0275inject(fe),m.\u0275\u0275inject(c.yh))},e.\u0275prov=m.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),be=r(40810),ye=r(5559),xe=r(80541),_e=r(65476),Se=r(2678),we=r(10758),Ie=r(1398),Ae=r(62827),ke=r(10709),Ce=r(2001),Ee=r(1947),Pe=r(4222),Oe=function(){var e=function e(){n(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=m.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=m.\u0275\u0275defineInjector({providers:[fe,ge,Ie.e,Se.C,Ae.$,we.N,Pe.u,Ee.h,N.qu],imports:[[s.ez,ne,q.dF,j.EoG,N.u5,j.nKr,j.T2N,j.zyh,j.MfT,j.OA,ie.$,j._WB,j.IIj,j.kmq,j.j7H.forChild(),j.wXm.forChild(),K.ne,oe.R,c.Aw.forFeature("doctors",xe.qf),ae.sQ.forFeature([be.e]),c.Aw.forFeature("patients",_e.Sx),ae.sQ.forFeature([ye.a]),c.Aw.forFeature("appointments",_),ae.sQ.forFeature([he]),c.Aw.forFeature("schedules",Ce.V8),ae.sQ.forFeature([ke.R]),N.UX]]}),e}()}}])}();