!function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[684],{77684:function(t,i,o){o.r(i),o.d(i,{ScheduleModule:function(){return W}});var a,r=o(38583),s=o(95987),l=o(55477),c=o(76185),d=o(37716),u=o(98152),m=o(54550),f=((a=function(){function t(n){e(this,t),this.service=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Doctor",type:"string"},lastName:{title:"Date",type:"string"}}},this.source=new c.nC;var i=this.service.getData();this.source.load(i)}return n(t,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(e){return new(e||a)(d.\u0275\u0275directiveInject(u.B))},a.\u0275cmp=d.\u0275\u0275defineComponent({type:a,selectors:[["ngx-holidays"]],decls:5,vars:2,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(d.\u0275\u0275elementStart(0,"nb-card"),d.\u0275\u0275elementStart(1,"nb-card-header"),d.\u0275\u0275text(2," Holidays's Table "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"nb-card-body"),d.\u0275\u0275elementStart(4,"ng2-smart-table",0),d.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(4),d.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[m.Asz,m.ndF,m.yKW,c.T5],styles:[""]}),a),h=o(68307),p=o(68020),y=o(65513),v=o(18541),b=o(65890),w=o(23065),g=o(42253),S=o(16738),C=o(91841),D=o(3679),_=o(486);function k(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"li"),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" Something is ",n," ")}}var B=[{path:"",children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:function(){var t=function(){function t(n,i,o,a){var r=this;e(this,t),this.http=n,this.store=i,this.formBuilder=o,this.apiClient=a,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saterday","Sunday"],this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmCreate:!0},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmEdit:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{name:{title:"Doctor",editable:!1,type:"string"},day_of_week:{editable:!1,title:"Days",type:"html",editor:{type:"list",config:{selectText:"Select",list:[{value:"Monday",title:"Monday"},{value:"Tuesday",title:"Tuesday"},{value:"Wednesday",title:"Wednesday"},{value:"Thursday",title:"Thursday"},{value:"Friday",title:"Friday"},{value:"Saturday",title:"Saturday"},{value:"Sunday",title:"Sunday"}]}}},start_time:{title:"Start Time",type:"string",editor:{type:"custom",component:g.e}},end_time:{title:"End Time",type:"string",editor:{type:"custom",component:g.e}},duration:{title:"Duration",type:"number"},unavailable:{title:"Available",type:"number",editor:{type:"list",config:{selectText:"Select",list:[{value:"1",title:"False"},{value:"0",title:"True"}]}}}}},this.source=new c.nC,this.store.pipe((0,w.Ys)(v.Zy),(0,h.b)(function(e){e||r.store.dispatch(new p.dP)})).subscribe(),this.store.pipe((0,w.Ys)(b.Js),(0,h.b)(function(e){e||r.store.dispatch(new y.XA)})).subscribe(),this.allDoctors$=this.store.pipe((0,w.Ys)(v.Bv)),this.allSchedules$=this.store.pipe((0,w.Ys)(b.mg))}return n(t,[{key:"ngOnInit",value:function(){}},{key:"addSchedule",value:function(e){console.log(e);var t={employee_id:12,day_of_week:e.newData.day_of_week,start_time:S(new Date(e.newData.start_time)).format("hh:mm"),end_time:S(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable};console.log(this.checkScheduleValidity(t)),this.ScheduleForm=this.formBuilder.group({employee_id:12,day:e.newData.day_of_week,start_time:S(new Date(e.newData.start_time)).format("hh:mm"),end_time:S(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable}),this.apiClient.postURI("schedules",this.ScheduleForm.value).subscribe(function(t){console.log(t),e.confirm.resolve(e.newData)},function(e){console.log(e),e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}},{key:"updateSchedule",value:function(e){console.log(e);var t={employee_id:35,day:e.newData.day_of_week,start_time:S(new Date(e.newData.start_time)).format("hh:mm"),end_time:S(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable};this.ScheduleForm=this.formBuilder.group(t),console.log(this.checkScheduleValidity(t)),this.apiClient.putURI("schedules",e.data.employee_id,this.ScheduleForm.value).subscribe(function(t){console.log(t),e.confirm.resolve(e.newData)},function(e){e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")}),this.http.put(this.apiClient.apiUrl+"/"+e.data.employee_id,this.ScheduleForm.value).subscribe(function(t){console.log(t),e.confirm.resolve(e.newData)},function(e){e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}},{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"checkScheduleValidity",value:function(e){var t,n=this,i=!1,o=[];return this.employeeSchedule$=this.store.pipe((0,w.Ys)((0,b.sG)(e.employee_id))),this.store.select((0,b.sG)(e.employee_id)).subscribe(function(e){t=e}),console.log(t),this.store.pipe((0,w.Ys)((0,b.sG)(e.employee_id))).subscribe(function(t){n.employeeSchedules=t,console.log(t),o.indexOf(n.employeeSchedule.day_of_week)!==e.day&&(i=!0),n.employeeSchedule.day_of_week.includes(e.day)}),console.log(i),i}}]),t}();return t.\u0275fac=function(e){return new(e||t)(d.\u0275\u0275directiveInject(C.eN),d.\u0275\u0275directiveInject(w.yh),d.\u0275\u0275directiveInject(D.qu),d.\u0275\u0275directiveInject(_.R))},t.\u0275cmp=d.\u0275\u0275defineComponent({type:t,selectors:[["ngx-schedule"]],decls:11,vars:10,consts:[[4,"ngFor","ngForOf"],[3,"settings","source","deleteConfirm","createConfirm","editConfirm"]],template:function(e,t){1&e&&(d.\u0275\u0275elementStart(0,"nb-card"),d.\u0275\u0275elementStart(1,"nb-card-header"),d.\u0275\u0275text(2," Schedule's Table "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(3,"nb-card-body"),d.\u0275\u0275text(4),d.\u0275\u0275pipe(5,"async"),d.\u0275\u0275elementStart(6,"ul"),d.\u0275\u0275template(7,k,2,1,"li",0),d.\u0275\u0275pipe(8,"async"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(9,"ng2-smart-table",1),d.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)})("createConfirm",function(e){return t.addSchedule(e)})("editConfirm",function(e){return t.updateSchedule(e)}),d.\u0275\u0275pipe(10,"async"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(4),d.\u0275\u0275textInterpolate1(" ",d.\u0275\u0275pipeBind1(5,4,t.employeeSchedule$)," "),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngForOf",d.\u0275\u0275pipeBind1(8,6,t.employeeSchedule$)),d.\u0275\u0275advance(2),d.\u0275\u0275property("settings",t.settings)("source",d.\u0275\u0275pipeBind1(10,8,t.allSchedules$)))},directives:[m.Asz,m.ndF,m.yKW,r.sg,c.T5],pipes:[r.Ov],styles:[""]}),t}()},{path:"holidays",component:f},{path:"**",component:l.w}]}],T=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=d.\u0275\u0275defineInjector({imports:[[s.Bz.forChild(B)],s.Bz]}),t}(),F=o(55171),E=o(73749),I=o(2001),j=o(10709),x=o(4222),A=o(1947),M=o(45887),$=o(40810),O=o(80541),z=o(2678),N=o(1398),W=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=d.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=d.\u0275\u0275defineInjector({providers:[x.u,A.h,N.e,z.C],imports:[[r.ez,T,m.EoG,D.u5,m.nKr,m.T2N,m.zyh,m.MfT,E.$,m._WB,F.R,c.ne,w.Aw.forFeature("doctors",O.qf),M.sQ.forFeature([$.e]),w.Aw.forFeature("schedules",I.V8),M.sQ.forFeature([j.R])]]}),t}()}}])}();