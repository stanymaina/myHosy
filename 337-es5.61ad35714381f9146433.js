!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,a=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(l){a=!0,r=l}finally{try{s||null==n.return||n.return()}finally{if(a)throw r}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[337],{71337:function(t,n,o){o.r(n),o.d(n,{BedModule:function(){return he}});var s,a=o(38583),l=o(95987),d=o(55477),c=o(76185),u=((s=u||(u={})).BedAllotmentRequested="[View BedAllotment Page] BedAllotment Requested",s.BedAllotmentLoaded="[BedAllotments API] BedAllotment Loaded",s.AllBedAllotmentsRequested="[BedAllotments Home Page] All BedAllotments Requested",s.AllBedAllotmentsLoaded="[BedAllotments API] All BedAllotments Loaded",s.BedAllotmentSaved="[Edit BedAllotment Dialog] BedAllotment Saved",u),f=function e(t){r(this,e),this.payload=t,this.type=u.BedAllotmentRequested},m=function e(t){r(this,e),this.payload=t,this.type=u.BedAllotmentLoaded},p=function e(){r(this,e),this.type=u.AllBedAllotmentsRequested},h=function e(t){r(this,e),this.payload=t,this.type=u.AllBedAllotmentsLoaded},b=o(23065),y=o(80273),v=(0,y.H)(),B=v.getInitialState({allBedAllotmentsLoaded:!1});function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.BedAllotmentLoaded:return v.addOne(t.payload.bedAllotment,e);case u.AllBedAllotmentsLoaded:return v.setAll(t.payload.bedAllotments,Object.assign(Object.assign({},e),{allBedAllotmentsLoaded:!0}));case u.BedAllotmentSaved:return v.updateOne(t.payload.bedAllotment,e);default:return e}}var A=v.getSelectors().selectAll,w=(0,b.ZF)("bedAllotments"),C=(0,b.P1)(w,A),j=(0,b.P1)(w,function(e){return e.allBedAllotmentsLoaded}),k=o(68307),S=o(37716),I=o(98152),_=o(54550),P=function(){return{type:"zoom"}},O=function(e){return{animation:e}},E=function(){var e=function(){function e(t,n){var i=this;r(this,e),this.service=t,this.store=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},bed_number:{title:"Bed",type:"string"},patient_name:{title:"Patient",type:"string"},alloted_time:{title:"Alloted Time",type:"string"},discharge_time:{title:"Discharge Time",type:"string"},status:{title:"Status",type:"string"}}},this.source=new c.nC,this.store.pipe((0,b.Ys)(j),(0,k.b)(function(e){e||i.store.dispatch(new p)})).subscribe(),this.allBedAllotments$=this.store.pipe((0,b.Ys)(C))}return i(e,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(I.B),S.\u0275\u0275directiveInject(b.yh))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-allotment"]],decls:8,vars:8,consts:[["type","submit","nbButton",""],["icon","star",3,"options"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"nb-card"),S.\u0275\u0275elementStart(1,"nb-card-header"),S.\u0275\u0275text(2," Bed Allotment's Table "),S.\u0275\u0275elementStart(3,"button",0),S.\u0275\u0275element(4,"nb-icon",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"nb-card-body"),S.\u0275\u0275elementStart(6,"ng2-smart-table",2),S.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),S.\u0275\u0275pipe(7,"async"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275advance(4),S.\u0275\u0275property("options",S.\u0275\u0275pureFunction1(6,O,S.\u0275\u0275pureFunction0(5,P))),S.\u0275\u0275advance(2),S.\u0275\u0275property("settings",t.settings)("source",S.\u0275\u0275pipeBind1(7,3,t.allBedAllotments$)))},directives:[_.Asz,_.ndF,_.DPz,_.yKW,c.T5],pipes:[a.Ov],styles:[""]}),e}(),L=function(){var e=function(){function e(t){r(this,e),this.service=t,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Category",type:"string"},lastName:{title:"Description",type:"string"}}},this.source=new c.nC;var n=this.service.getData();this.source.load(n)}return i(e,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(I.B))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-category"]],decls:7,vars:2,consts:[["type","submit","nbButton","","status","danger"],[1,"fa","fa-edit"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"nb-card"),S.\u0275\u0275elementStart(1,"nb-card-header"),S.\u0275\u0275text(2," Bed Category's Table "),S.\u0275\u0275elementStart(3,"button",0),S.\u0275\u0275element(4,"i",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"nb-card-body"),S.\u0275\u0275elementStart(6,"ng2-smart-table",2),S.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275advance(6),S.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[_.Asz,_.ndF,_.DPz,_.yKW,c.T5],styles:[""]}),e}(),R=function(){return(e=R||(R={})).BedRequested="[View Bed Page] Bed Requested",e.BedLoaded="[Beds API] Bed Loaded",e.AllBedsRequested="[Beds Home Page] All Beds Requested",e.AllBedsLoaded="[Beds API] All Beds Loaded",e.BedSaved="[Edit Bed Dialog] Bed Saved",R;var e}(),$=function e(t){r(this,e),this.payload=t,this.type=R.BedRequested},z=function e(t){r(this,e),this.payload=t,this.type=R.BedLoaded},D=function e(){r(this,e),this.type=R.AllBedsRequested},q=function e(t){r(this,e),this.payload=t,this.type=R.AllBedsLoaded},M=(0,y.H)(),T=M.getInitialState({allBedsLoaded:!1});function F(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case R.BedLoaded:return M.addOne(t.payload.bed,e);case R.AllBedsLoaded:return M.setAll(t.payload.beds,Object.assign(Object.assign({},e),{allBedsLoaded:!0}));case R.BedSaved:return M.updateOne(t.payload.bed,e);default:return e}}var U=M.getSelectors().selectAll,x=(0,b.ZF)("beds"),N=(0,b.P1)(x,U),Y=(0,b.P1)(x,function(e){return e.allBedsLoaded}),H=((0,b.P1)(N,function(e){return e.filter(function(e){return"Available"===e.status})}),(0,b.P1)(N,function(e){return e.filter(function(e){return"Alloted"===e.status})}),[{path:"",component:function(){var e=function(){function e(){r(this,e),this.tabs=[{title:"List",route:"/0/bed/list"},{title:"Categories",route:"/0/bed/category"},{title:"Allotment",route:"/0/bed/allotment"}]}return i(e,[{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed"]],decls:4,vars:1,consts:[[1,"row"],[1,"col-12"],["size","small"],["fullWidth","",3,"tabs"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"div",0),S.\u0275\u0275elementStart(1,"div",1),S.\u0275\u0275elementStart(2,"nb-card",2),S.\u0275\u0275element(3,"nb-route-tabset",3),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275advance(3),S.\u0275\u0275property("tabs",t.tabs))},directives:[_.Asz,_.l0$],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),e}(),children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:function(){var e=function(){function e(t,n){var i=this;r(this,e),this.service=t,this.store=n,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},number:{title:"Bed Number",type:"string"},category_name:{title:"Category",type:"string"},status:{title:"Status",type:"string"}}},this.store.pipe((0,b.Ys)(Y),(0,k.b)(function(e){e||i.store.dispatch(new D)})).subscribe(),this.allBeds$=this.store.pipe((0,b.Ys)(N))}return i(e,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275directiveInject(I.B),S.\u0275\u0275directiveInject(b.yh))},e.\u0275cmp=S.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bed-list"]],decls:8,vars:4,consts:[["type","submit","nbButton","","status","danger"],[1,"fa","fa-edit"],[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(S.\u0275\u0275elementStart(0,"nb-card"),S.\u0275\u0275elementStart(1,"nb-card-header"),S.\u0275\u0275text(2," Bed's Table "),S.\u0275\u0275elementStart(3,"button",0),S.\u0275\u0275element(4,"i",1),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementStart(5,"nb-card-body"),S.\u0275\u0275elementStart(6,"ng2-smart-table",2),S.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),S.\u0275\u0275pipe(7,"async"),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd(),S.\u0275\u0275elementEnd()),2&e&&(S.\u0275\u0275advance(6),S.\u0275\u0275property("settings",t.settings)("source",S.\u0275\u0275pipeBind1(7,2,t.allBeds$)))},directives:[_.Asz,_.ndF,_.DPz,_.yKW,c.T5],pipes:[a.Ov],styles:[""]}),e}()},{path:"category",component:L},{path:"allotment",component:E},{path:"**",component:d.w}]}]),Q=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=S.\u0275\u0275defineInjector({imports:[[l.Bz.forChild(H)],l.Bz]}),e}(),W=o(55171),K=o(3679),V=o(73749),X=o(64762),Z=o(91601),G=o(19773),J=o(88002),ee=o(57057),te=o(45435),ne=o(91841),ie=function e(t,n,i,o,s,a,l,d){r(this,e),this.id=t,this.number=n,this.category_id=i,this.category_name=o,this.last_a_time=s,this.last_d_time=a,this.description=l,this.status=d},re=function(){var e=function(){function e(){r(this,e)}return i(e,[{key:"adapt",value:function(e){return new ie(e.id,e.number,e.category_id,e.category.bed_category,e.last_a_time,e.last_d_time,e.description,e.status)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),oe=o(486),se=function(){var e=function(){function e(t,n,i){r(this,e),this.http=t,this.adapter=n,this.jarwis=i}return i(e,[{key:"findBedById",value:function(e){return this.http.get(this.jarwis.apiUrl+"/beds/".concat(e))}},{key:"findAllBeds",value:function(){var e=this;return this.jarwis.getURI("beds").pipe((0,J.U)(function(t){return t.data.map(function(t){return e.adapter.adapt(t)})}))}},{key:"saveBed",value:function(e,t){return this.http.put("/api/beds/"+e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(ne.eN),S.\u0275\u0275inject(re),S.\u0275\u0275inject(oe.R))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),ae=function t(n,i,o){var s=this;r(this,t),this.actions$=n,this.bedsService=i,this.store=o,this.loadBed$=this.actions$.pipe((0,Z.l4)(R.BedRequested),(0,G.zg)(function(e){return s.bedsService.findBedById(e.payload.bedId)}),(0,J.U)(function(e){return new z({bed:e})})),this.loadAllBeds$=this.actions$.pipe((0,Z.l4)(R.AllBedsRequested),(0,ee.M)(this.store.pipe((0,b.Ys)(Y))),(0,te.h)(function(t){return!e(t,2)[1]}),(0,G.zg)(function(){return s.bedsService.findAllBeds()}),(0,J.U)(function(e){return new q({beds:e})}))};ae.\u0275fac=function(e){return new(e||ae)(S.\u0275\u0275inject(Z.eX),S.\u0275\u0275inject(se),S.\u0275\u0275inject(b.yh))},ae.\u0275prov=S.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac}),(0,X.gn)([(0,Z.Qm)()],ae.prototype,"loadBed$",void 0),(0,X.gn)([(0,Z.Qm)()],ae.prototype,"loadAllBeds$",void 0);var le=function e(t,n,i,o,s,a,l,d){r(this,e),this.id=t,this.bed_id=n,this.bed_number=i,this.patient_id=o,this.patient_name=s,this.alloted_time=a,this.discharge_time=l,this.status=d},de=function(){var e=function(){function e(){r(this,e)}return i(e,[{key:"adapt",value:function(e){return new le(e.id,e.bed_id,e.bed.number,e.patient_id,e.patient.user.first_name+" "+e.patient.user.other_name,e.alloted_time,e.discharge_time,e.status)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),ce=function(){var e=function(){function e(t,n,i){r(this,e),this.http=t,this.adapter=n,this.jarwis=i}return i(e,[{key:"findBedAllotmentById",value:function(e){return this.http.get(this.jarwis.apiUrl+"/bed-allotment/".concat(e))}},{key:"findAllBedAllotments",value:function(){var e=this;return this.jarwis.getURI("bed-allotment").pipe((0,J.U)(function(t){return t.data.map(function(t){return e.adapter.adapt(t)})}))}},{key:"saveBedAllotment",value:function(e,t){return this.http.put("/api/bed-allotment/"+e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(ne.eN),S.\u0275\u0275inject(de),S.\u0275\u0275inject(oe.R))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),ue=function t(n,i,o){var s=this;r(this,t),this.actions$=n,this.bedAllotmentsService=i,this.store=o,this.loadBedAllotment$=this.actions$.pipe((0,Z.l4)(u.BedAllotmentRequested),(0,G.zg)(function(e){return s.bedAllotmentsService.findBedAllotmentById(e.payload.bedAllotmentId)}),(0,J.U)(function(e){return new m({bedAllotment:e})})),this.loadAllBedAllotments$=this.actions$.pipe((0,Z.l4)(u.AllBedAllotmentsRequested),(0,ee.M)(this.store.pipe((0,b.Ys)(j))),(0,te.h)(function(t){return!e(t,2)[1]}),(0,G.zg)(function(){return s.bedAllotmentsService.findAllBedAllotments()}),(0,J.U)(function(e){return new h({bedAllotments:e})}))};ue.\u0275fac=function(e){return new(e||ue)(S.\u0275\u0275inject(Z.eX),S.\u0275\u0275inject(ce),S.\u0275\u0275inject(b.yh))},ue.\u0275prov=S.\u0275\u0275defineInjectable({token:ue,factory:ue.\u0275fac}),(0,X.gn)([(0,Z.Qm)()],ue.prototype,"loadBedAllotment$",void 0),(0,X.gn)([(0,Z.Qm)()],ue.prototype,"loadAllBedAllotments$",void 0);var fe=o(28049),me=function(){var e=function(){function e(t,n){r(this,e),this.bedsService=t,this.store=n}return i(e,[{key:"resolve",value:function(e,t){var n,i=this,r=e.params.id;return this.store.pipe((0,b.Ys)((n=r,(0,b.P1)(x,function(e){return e.entities[n]}))),(0,k.b)(function(e){e||i.store.dispatch(new $({bedId:r}))}),(0,te.h)(function(e){return!!e}),(0,fe.P)())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(se),S.\u0275\u0275inject(b.yh))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),pe=function(){var e=function(){function e(t,n){r(this,e),this.bedAllotmentsService=t,this.store=n}return i(e,[{key:"resolve",value:function(e,t){var n,i=this,r=e.params.id;return this.store.pipe((0,b.Ys)((n=r,(0,b.P1)(w,function(e){return e.entities[n]}))),(0,k.b)(function(e){e||i.store.dispatch(new f({bedAllotmentId:r}))}),(0,te.h)(function(e){return!!e}),(0,fe.P)())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(S.\u0275\u0275inject(ce),S.\u0275\u0275inject(b.yh))},e.\u0275prov=S.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),he=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=S.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=S.\u0275\u0275defineInjector({providers:[se,me,ce,pe],imports:[[a.ez,Q,_.EoG,K.u5,_.nKr,_.T2N,_.zyh,_.MfT,V.$,_._WB,W.R,c.ne,b.Aw.forFeature("beds",F),Z.sQ.forFeature([ae]),b.Aw.forFeature("bedAllotments",g),Z.sQ.forFeature([ue])]]}),e}()}}])}();