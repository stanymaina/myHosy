"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[400],{21400:function(e,t,s){s.r(t),s.d(t,{ScheduleModule:function(){return G}});var n=s(38583),c=s(95987),i=s(55477),r=s(76185),o=s(37716),l=s(98152),d=s(54550);let a=(()=>{class e{constructor(e){this.service=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Doctor",type:"string"},lastName:{title:"Date",type:"string"}}},this.source=new r.nC;const t=this.service.getData();this.source.load(t)}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(l.B))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-holidays"]],decls:5,vars:2,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"nb-card"),o.\u0275\u0275elementStart(1,"nb-card-header"),o.\u0275\u0275text(2," Holidays's Table "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"nb-card-body"),o.\u0275\u0275elementStart(4,"ng2-smart-table",0),o.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(4),o.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[d.Asz,d.ndF,d.yKW,r.T5],styles:[""]}),e})();var u=s(68307),h=s(68020),p=(()=>{return(e=p||(p={})).ScheduleRequested="[View Schedule Page] Schedule Requested",e.ScheduleLoaded="[Schedules API] Schedule Loaded",e.AllSchedulesRequested="[Schedules Home Page] All Schedules Requested",e.AllSchedulesLoaded="[Schedules API] All Schedules Loaded",e.ScheduleSaved="[Edit Schedule Dialog] Schedule Saved",p;var e})();class f{constructor(e){this.payload=e,this.type=p.ScheduleRequested}}class m{constructor(e){this.payload=e,this.type=p.ScheduleLoaded}}class y{constructor(){this.type=p.AllSchedulesRequested}}class S{constructor(e){this.payload=e,this.type=p.AllSchedulesLoaded}}var b=s(18541),v=s(23065);const g=(0,s(80273).H)(),w=g.getInitialState({allSchedulesLoaded:!1});function C(e=w,t){switch(t.type){case p.ScheduleLoaded:return g.addOne(t.payload.schedule,e);case p.AllSchedulesLoaded:return g.setAll(t.payload.schedules,Object.assign(Object.assign({},e),{allSchedulesLoaded:!0}));case p.ScheduleSaved:return g.updateOne(t.payload.schedule,e);default:return e}}const{selectAll:j}=g.getSelectors(),B=(0,v.ZF)("schedules"),A=(0,v.P1)(B,j),_=(0,v.P1)(B,e=>e.allSchedulesLoaded),I=[{path:"",children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:(()=>{class e{constructor(e,t){this.service=e,this.store=t,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{name:{title:"Doctor",type:"number"},day_of_week:{title:"Day",type:"string"},start_time:{title:"Start Time",type:"string"},end_time:{title:"End Time",type:"string"},duration:{title:"Duration",type:"number"}}},this.source=new r.nC,this.store.pipe((0,v.Ys)(b.Zy),(0,u.b)(e=>{e||this.store.dispatch(new h.dP)})).subscribe(),this.store.pipe((0,v.Ys)(_),(0,u.b)(e=>{e||this.store.dispatch(new y)})).subscribe(),this.allDoctors$=this.store.pipe((0,v.Ys)(b.Bv)),this.allSchedules$=this.store.pipe((0,v.Ys)(A))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(l.B),o.\u0275\u0275directiveInject(v.yh))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["ngx-schedule"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"nb-card"),o.\u0275\u0275elementStart(1,"nb-card-header"),o.\u0275\u0275text(2," Schedule's Table "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"nb-card-body"),o.\u0275\u0275elementStart(4,"ng2-smart-table",0),o.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),o.\u0275\u0275pipe(5,"async"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(4),o.\u0275\u0275property("settings",t.settings)("source",o.\u0275\u0275pipeBind1(5,2,t.allSchedules$)))},directives:[d.Asz,d.ndF,d.yKW,r.T5],pipes:[n.Ov],styles:[""]}),e})()},{path:"holidays",component:a},{path:"**",component:i.w}]}];let k=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({imports:[[c.Bz.forChild(I)],c.Bz]}),e})();var D=s(55171),$=s(3679),E=s(73749),L=s(64762),R=s(91601),q=s(19773),P=s(88002),T=s(57057),z=s(45435),F=s(91841),O=s(486);class M{constructor(e,t,s,n,c,i,r,o,l){this.id=e,this.user_id=t,this.doctor_id=s,this.name=n,this.day_of_week=c,this.end_time=i,this.start_time=r,this.duration=o,this.hospital_id=l}}let N=(()=>{class e{constructor(e){this.datepipe=e}adapt(e){return new M(e.id,e.doctor.user_id,e.doctor_id,e.doctor.user.first_name+" "+e.doctor.user.other_name,e.day_of_week,e.end_time,e.start_time,e.duration,e.hospital_id)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(n.uU))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),U=(()=>{class e{constructor(e,t,s){this.http=e,this.jarwis=t,this.adapter=s}findScheduleById(e){return this.http.get(this.jarwis.apiUrl+`/schedules/${e}`)}findAllSchedules(){return this.jarwis.getURI("schedules").pipe((0,P.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}saveSchedule(e,t){return this.http.put("/api/schedules/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(F.eN),o.\u0275\u0275inject(O.R),o.\u0275\u0275inject(N))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class Y{constructor(e,t,s){this.actions$=e,this.schedulesService=t,this.store=s,this.loadSchedule$=this.actions$.pipe((0,R.l4)(p.ScheduleRequested),(0,q.zg)(e=>this.schedulesService.findScheduleById(e.payload.scheduleId)),(0,P.U)(e=>new m({schedule:e}))),this.loadAllSchedules$=this.actions$.pipe((0,R.l4)(p.AllSchedulesRequested),(0,T.M)(this.store.pipe((0,v.Ys)(_))),(0,z.h)(([,e])=>!e),(0,q.zg)(()=>this.schedulesService.findAllSchedules()),(0,P.U)(e=>new S({schedules:e})))}}Y.\u0275fac=function(e){return new(e||Y)(o.\u0275\u0275inject(R.eX),o.\u0275\u0275inject(U),o.\u0275\u0275inject(v.yh))},Y.\u0275prov=o.\u0275\u0275defineInjectable({token:Y,factory:Y.\u0275fac}),(0,L.gn)([(0,R.Qm)()],Y.prototype,"loadSchedule$",void 0),(0,L.gn)([(0,R.Qm)()],Y.prototype,"loadAllSchedules$",void 0);var H=s(28049);let x=(()=>{class e{constructor(e,t){this.scheduleService=e,this.store=t}resolve(e,t){const s=e.params.id;return this.store.pipe((0,v.Ys)((e=>(0,v.P1)(B,t=>t.entities[e]))(s)),(0,u.b)(e=>{e||this.store.dispatch(new f({scheduleId:s}))}),(0,z.h)(e=>!!e),(0,H.P)())}}return e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(U),o.\u0275\u0275inject(v.yh))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();var Q=s(40810),K=s(80541),W=s(2678),Z=s(1398);let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({providers:[U,x,Z.e,W.C],imports:[[n.ez,k,d.EoG,$.u5,d.nKr,d.T2N,d.zyh,d.MfT,E.$,d._WB,D.R,r.ne,v.Aw.forFeature("doctors",K.qf),R.sQ.forFeature([Q.e]),v.Aw.forFeature("schedules",C),R.sQ.forFeature([Y])]]}),e})()}}]);