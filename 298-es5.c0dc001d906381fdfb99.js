!function(){"use strict";function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var i,r,o=[],s=!0,c=!1;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(o.push(i.value),!t||o.length!==t);s=!0);}catch(a){c=!0,r=a}finally{try{s||null==n.return||n.return()}finally{if(c)throw r}}return o}(e,n)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[298],{90298:function(t,n,o){o.r(n),o.d(n,{PrescriptionModule:function(){return K}});var s,c=o(38583),a=o(95987),p=o(55477),u=((s=u||(u={})).PrescriptionRequested="[View Prescription Page] Prescription Requested",s.PrescriptionLoaded="[Prescriptions API] Prescription Loaded",s.AllPrescriptionsRequested="[Prescriptions Home Page] All Prescriptions Requested",s.AllPrescriptionsLoaded="[Prescriptions API] All Prescriptions Loaded",s.PrescriptionSaved="[Edit Prescription Dialog] Prescription Saved",u),l=function e(t){r(this,e),this.payload=t,this.type=u.PrescriptionRequested},d=function e(t){r(this,e),this.payload=t,this.type=u.PrescriptionLoaded},f=function e(){r(this,e),this.type=u.AllPrescriptionsRequested},h=function e(t){r(this,e),this.payload=t,this.type=u.AllPrescriptionsLoaded},y=o(23065),m=(0,o(80273).H)(),v=m.getInitialState({allPrescriptionsLoaded:!1});function P(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u.PrescriptionLoaded:return m.addOne(t.payload.prescription,e);case u.AllPrescriptionsLoaded:return m.setAll(t.payload.prescriptions,Object.assign(Object.assign({},e),{allPrescriptionsLoaded:!0}));case u.PrescriptionSaved:return m.updateOne(t.payload.prescription,e);default:return e}}var g=m.getSelectors().selectAll,b=(0,y.ZF)("prescriptions"),w=(0,y.P1)(b,g),j=(0,y.P1)(b,function(e){return e.allPrescriptionsLoaded}),A=o(68307),_=o(37716),I=o(54550),k=o(76185),C=function(){var e=function(){function e(t){var n=this;r(this,e),this.store=t,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},given_on:{title:"Date",type:"string"},employee_name:{title:"Doctor",type:"string"},patient_name:{title:"Patient",type:"string"},medicine_id:{title:"Medicine",type:"string"}}},this.store.pipe((0,y.Ys)(j),(0,A.b)(function(e){e||n.store.dispatch(new f)})).subscribe(),this.allPrescriptions$=this.store.pipe((0,y.Ys)(w))}return i(e,[{key:"onDeleteConfirm",value:function(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_.\u0275\u0275directiveInject(y.yh))},e.\u0275cmp=_.\u0275\u0275defineComponent({type:e,selectors:[["ngx-prescription"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(_.\u0275\u0275elementStart(0,"nb-card"),_.\u0275\u0275elementStart(1,"nb-card-header"),_.\u0275\u0275text(2," Prescriptions' Table "),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementStart(3,"nb-card-body"),_.\u0275\u0275elementStart(4,"ng2-smart-table",0),_.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),_.\u0275\u0275pipe(5,"async"),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementEnd(),_.\u0275\u0275elementEnd()),2&e&&(_.\u0275\u0275advance(4),_.\u0275\u0275property("settings",t.settings)("source",_.\u0275\u0275pipeBind1(5,2,t.allPrescriptions$)))},directives:[I.Asz,I.ndF,I.yKW,k.T5],pipes:[c.Ov],styles:[""]}),e}(),S=[{path:"",component:C,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"add",component:C},{path:"**",component:p.w}]}],B=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=_.\u0275\u0275defineInjector({imports:[[a.Bz.forChild(S)],a.Bz]}),e}(),L=o(73749),R=o(45887),$=o(61758),O=o(55171),q=o(3679),E=o(64762),M=o(19773),z=o(88002),D=o(57057),T=o(45435),U=o(91841),F=function e(t,n,i,o,s,c,a,p,u,l,d,f,h,y,m){r(this,e),this.id=t,this.patient=n,this.patient_id=i,this.patient_name=o,this.employee=s,this.employee_id=c,this.employee_name=a,this.advice=p,this.symptom=u,this.medicine_id=l,this.medicine=d,this.validity=f,this.pres_img_url=h,this.state=y,this.given_on=m},H=function(){var e=function(){function e(){r(this,e)}return i(e,[{key:"adapt",value:function(e){return new F(e.id,e.patient_id,e.patient,e.patient.user.first_name+" "+e.patient.user.other_name,e.employee,e.employee_id,"Dr. ".concat(e.employee.user.first_name," ").concat(e.employee.user.other_name),e.advice,e.symptom,e.medicine_id,e.medicines,e.validity,e.pres_img_url,e.state,e.given_on)}}]),e}();return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=_.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),N=o(486),Y=function(){var e=function(){function e(t,n,i){r(this,e),this.http=t,this.adapter=n,this.jarwis=i}return i(e,[{key:"findPrescriptionById",value:function(e){return this.http.get(this.jarwis.apiUrl+"/prescriptions/".concat(e))}},{key:"findAllPrescriptions",value:function(){var e=this;return this.jarwis.getURI("prescriptions").pipe((0,z.U)(function(t){return t.data.map(function(t){return e.adapter.adapt(t)})}))}},{key:"savePrescription",value:function(e,t){return this.http.put("/api/prescriptions/"+e,t)}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_.\u0275\u0275inject(U.eN),_.\u0275\u0275inject(H),_.\u0275\u0275inject(N.R))},e.\u0275prov=_.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),x=function t(n,i,o){var s=this;r(this,t),this.actions$=n,this.prescriptionsService=i,this.store=o,this.loadPrescription$=this.actions$.pipe((0,R.l4)(u.PrescriptionRequested),(0,M.zg)(function(e){return s.prescriptionsService.findPrescriptionById(e.payload.prescriptionId)}),(0,z.U)(function(e){return new d({prescription:e})})),this.loadAllPrescriptions$=this.actions$.pipe((0,R.l4)(u.AllPrescriptionsRequested),(0,D.M)(this.store.pipe((0,y.Ys)(j))),(0,T.h)(function(t){return!e(t,2)[1]}),(0,M.zg)(function(){return s.prescriptionsService.findAllPrescriptions()}),(0,z.U)(function(e){return new h({prescriptions:e})}))};x.\u0275fac=function(e){return new(e||x)(_.\u0275\u0275inject(R.eX),_.\u0275\u0275inject(Y),_.\u0275\u0275inject(y.yh))},x.\u0275prov=_.\u0275\u0275defineInjectable({token:x,factory:x.\u0275fac}),(0,E.gn)([(0,R.Qm)()],x.prototype,"loadPrescription$",void 0),(0,E.gn)([(0,R.Qm)()],x.prototype,"loadAllPrescriptions$",void 0);var Q=o(28049),X=function(){var e=function(){function e(t,n){r(this,e),this.prescriptionsService=t,this.store=n}return i(e,[{key:"resolve",value:function(e,t){var n,i=this,r=e.params.id;return this.store.pipe((0,y.Ys)((n=r,(0,y.P1)(b,function(e){return e.entities[n]}))),(0,A.b)(function(e){e||i.store.dispatch(new l({prescriptionId:r}))}),(0,T.h)(function(e){return!!e}),(0,Q.P)())}}]),e}();return e.\u0275fac=function(t){return new(t||e)(_.\u0275\u0275inject(Y),_.\u0275\u0275inject(y.yh))},e.\u0275prov=_.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}(),K=function(){var e=function e(){r(this,e)};return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=_.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=_.\u0275\u0275defineInjector({providers:[Y,X],imports:[[c.ez,B,$.dF,I.EoG,q.u5,I.nKr,I.T2N,I.zyh,I.MfT,I.OA,L.$,I._WB,I.IIj,I.kmq,I.j7H.forChild(),I.wXm.forChild(),k.ne,O.R,y.Aw.forFeature("prescriptions",P),R.sQ.forFeature([x]),q.UX]]}),e}()}}])}();