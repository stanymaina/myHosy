"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[638],{46638:function(e,t,o){o.r(t),o.d(t,{BloodbankModule:function(){return ce}});var n=o(38583),s=o(95987),r=o(55477),a=o(23065),i=o(80273),l=(()=>{return(e=l||(l={})).BloodBankRequested="[View BloodBank Page] BloodBank Requested",e.BloodBankLoaded="[BloodBanks API] BloodBank Loaded",e.AllBloodBanksRequested="[BloodBanks Home Page] All BloodBanks Requested",e.AllBloodBanksLoaded="[BloodBanks API] All BloodBanks Loaded",e.BloodBankSaved="[Edit BloodBank Dialog] BloodBank Saved",l;var e})();class d{constructor(e){this.payload=e,this.type=l.BloodBankRequested}}class c{constructor(e){this.payload=e,this.type=l.BloodBankLoaded}}class u{constructor(){this.type=l.AllBloodBanksRequested}}class p{constructor(e){this.payload=e,this.type=l.AllBloodBanksLoaded}}const h=(0,i.H)(),B=h.getInitialState({allBloodBanksLoaded:!1});function b(e=B,t){switch(t.type){case l.BloodBankLoaded:return h.addOne(t.payload.bloodBank,e);case l.AllBloodBanksLoaded:return h.setAll(t.payload.bloodBanks,Object.assign(Object.assign({},e),{allBloodBanksLoaded:!0}));case l.BloodBankSaved:return h.updateOne(t.payload.bloodBank,e);default:return e}}const{selectAll:f}=h.getSelectors(),m=(0,a.ZF)("bloodBanks"),g=(0,a.P1)(m,f),y=((0,a.P1)(g,e=>e.filter(e=>"A+"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"A-"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"B+"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"B-"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"AB+"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"AB-"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"O+"===e.blood_group)),(0,a.P1)(g,e=>e.filter(e=>"O-"===e.blood_group)),(0,a.P1)(m,e=>e.allBloodBanksLoaded));var k=o(37716),v=o(54550),D=o(76185);let C=(()=>{class e{constructor(e){this.store=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},blood_group:{title:"Blood Group",type:"string"},blood_bags:{title:"Bags",type:"string"},quantity:{title:"Quantity(ml)",type:"string"}}},this.allBloodBanks$=this.store.pipe((0,a.Ys)(g))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(a.yh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bloodbank-index"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"nb-card"),k.\u0275\u0275elementStart(1,"nb-card-header"),k.\u0275\u0275text(2," Blood Bank Status "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"nb-card-body"),k.\u0275\u0275elementStart(4,"ng2-smart-table",0),k.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),k.\u0275\u0275pipe(5,"async"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(4),k.\u0275\u0275property("settings",t.settings)("source",k.\u0275\u0275pipeBind1(5,2,t.allBloodBanks$)))},directives:[v.Asz,v.ndF,v.yKW,D.T5],pipes:[n.Ov],styles:[""]}),e})();var w=o(98152);let A=(()=>{class e{constructor(e){this.service=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Blood Group",type:"string"},lastName:{title:"Status",type:"string"},username:{title:"Bags",type:"string"}}},this.source=new D.nC;const t=this.service.getData();this.source.load(t)}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(w.B))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bloodbank-logs"]],decls:5,vars:2,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"nb-card"),k.\u0275\u0275elementStart(1,"nb-card-header"),k.\u0275\u0275text(2," Blood Bank Logs "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"nb-card-body"),k.\u0275\u0275elementStart(4,"ng2-smart-table",0),k.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(4),k.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[v.Asz,v.ndF,v.yKW,D.T5],styles:[""]}),e})();var j=o(68307),_=(()=>{return(e=_||(_={})).DonorRequested="[View Donor Page] Donor Requested",e.DonorLoaded="[Donors API] Donor Loaded",e.AllDonorsRequested="[Donors Home Page] All Donors Requested",e.AllDonorsLoaded="[Donors API] All Donors Loaded",e.DonorSaved="[Edit Donor Dialog] Donor Saved",_;var e})();class S{constructor(e){this.payload=e,this.type=_.DonorRequested}}class I{constructor(e){this.payload=e,this.type=_.DonorLoaded}}class P{constructor(){this.type=_.AllDonorsRequested}}class L{constructor(e){this.payload=e,this.type=_.AllDonorsLoaded}}const O=(0,i.H)(),$=O.getInitialState({allDonorsLoaded:!1});function R(e=$,t){switch(t.type){case _.DonorLoaded:return O.addOne(t.payload.donor,e);case _.AllDonorsLoaded:return O.setAll(t.payload.donors,Object.assign(Object.assign({},e),{allDonorsLoaded:!0}));case _.DonorSaved:return O.updateOne(t.payload.donor,e);default:return e}}const{selectAll:q}=O.getSelectors(),E=(0,a.ZF)("donors"),M=(0,a.P1)(E,q),z=(0,a.P1)(E,e=>e.allDonorsLoaded),x=[{path:"",component:(()=>{class e{constructor(e){this.store=e,this.tabs=[{title:"Blood Bank",route:"/0/bloodbank/index"},{title:"Donors",route:"/0/bloodbank/donors"},{title:"Logs",route:"/0/bloodbank/logs"}],this.store.pipe((0,a.Ys)(y),(0,j.b)(e=>{e||this.store.dispatch(new u)})).subscribe(),this.store.pipe((0,a.Ys)(z),(0,j.b)(e=>{e||this.store.dispatch(new P)})).subscribe()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(a.yh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ngx-bloodbank"]],decls:4,vars:1,consts:[[1,"row"],[1,"col-12"],["size","small"],["fullWidth","",3,"tabs"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"div",0),k.\u0275\u0275elementStart(1,"div",1),k.\u0275\u0275elementStart(2,"nb-card",2),k.\u0275\u0275element(3,"nb-route-tabset",3),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(3),k.\u0275\u0275property("tabs",t.tabs))},directives:[v.Asz,v.l0$],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),e})(),children:[{path:"",redirectTo:"index",pathMatch:"full"},{path:"index",component:C},{path:"donors",component:(()=>{class e{constructor(e){this.store=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Name",type:"string"},lastName:{title:"Blood Group",type:"string"},username:{title:"Age",type:"string"},email:{title:"Sex",type:"string"},id:{title:"Last Donation",type:"string"},age:{title:"Phone",type:"number"}}},this.allDonors$=this.store.pipe((0,a.Ys)(M))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275directiveInject(a.yh))},e.\u0275cmp=k.\u0275\u0275defineComponent({type:e,selectors:[["ngx-donor"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(k.\u0275\u0275elementStart(0,"nb-card"),k.\u0275\u0275elementStart(1,"nb-card-header"),k.\u0275\u0275text(2," Donor's Table "),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementStart(3,"nb-card-body"),k.\u0275\u0275elementStart(4,"ng2-smart-table",0),k.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),k.\u0275\u0275pipe(5,"async"),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd(),k.\u0275\u0275elementEnd()),2&e&&(k.\u0275\u0275advance(4),k.\u0275\u0275property("settings",t.settings)("source",k.\u0275\u0275pipeBind1(5,2,t.allDonors$)))},directives:[v.Asz,v.ndF,v.yKW,D.T5],pipes:[n.Ov],styles:[""]}),e})()},{path:"logs",component:A},{path:"**",component:r.w}]}];let N=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({imports:[[s.Bz.forChild(x)],s.Bz]}),e})();var U=o(73749),F=o(46258),T=o(76773),Y=o(44519),H=o(55171),Q=o(64762),G=o(45887),K=o(19773),W=o(88002),J=o(57057),V=o(45435),X=o(91841),Z=o(486);class ee{constructor(e,t,o,n,s,r,a,i){this.id=e,this.user_id=t,this.user_name=o,this.blood_group_id=n,this.blood_group=s,this.blood_bags=r,this.blood_bags_quantity=a,this.donation_date=i}}let te=(()=>{class e{adapt(e){return new ee(e.id,e.user_id,e.user.first_name+" "+e.user.other_name,e.blood_group_id,e.bloodGroup.blood_group,e.blood_bags,e.blood_bags_quantity,e.donation_date)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),oe=(()=>{class e{constructor(e,t,o){this.http=e,this.jarwis=t,this.adapter=o}findDonorById(e){return this.http.get(this.jarwis.apiUrl+`/blood-donors/${e}`)}findAllDonors(){return this.jarwis.getURI("blood-donors").pipe((0,W.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}saveDonor(e,t){return this.http.put("/api/blood-donors/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(X.eN),k.\u0275\u0275inject(Z.R),k.\u0275\u0275inject(te))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class ne{constructor(e,t,o){this.actions$=e,this.donorsService=t,this.store=o,this.loadDonor$=this.actions$.pipe((0,G.l4)(_.DonorRequested),(0,K.zg)(e=>this.donorsService.findDonorById(e.payload.donorId)),(0,W.U)(e=>new I({donor:e}))),this.loadAllDonors$=this.actions$.pipe((0,G.l4)(_.AllDonorsRequested),(0,J.M)(this.store.pipe((0,a.Ys)(z))),(0,V.h)(([,e])=>!e),(0,K.zg)(()=>this.donorsService.findAllDonors()),(0,W.U)(e=>new L({donors:e})))}}ne.\u0275fac=function(e){return new(e||ne)(k.\u0275\u0275inject(G.eX),k.\u0275\u0275inject(oe),k.\u0275\u0275inject(a.yh))},ne.\u0275prov=k.\u0275\u0275defineInjectable({token:ne,factory:ne.\u0275fac}),(0,Q.gn)([(0,G.Qm)()],ne.prototype,"loadDonor$",void 0),(0,Q.gn)([(0,G.Qm)()],ne.prototype,"loadAllDonors$",void 0);var se=o(91622);let re=(()=>{class e{constructor(e,t,o){this.http=e,this.Token=t,this.jarwis=o}findBloodBankById(e){return this.http.get(this.jarwis.apiUrl+`/blood-bank/${e}`)}findAllBloodBanks(){return this.jarwis.getURI("blood-bank").pipe((0,W.U)(e=>e.data))}saveBloodBank(e,t){return this.http.put("/api/blood-bank/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(X.eN),k.\u0275\u0275inject(se.B),k.\u0275\u0275inject(Z.R))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class ae{constructor(e,t,o){this.actions$=e,this.bloodBanksService=t,this.store=o,this.loadBloodBank$=this.actions$.pipe((0,G.l4)(l.BloodBankRequested),(0,K.zg)(e=>this.bloodBanksService.findBloodBankById(e.payload.bloodBankId)),(0,W.U)(e=>new c({bloodBank:e}))),this.loadAllBloodBanks$=this.actions$.pipe((0,G.l4)(l.AllBloodBanksRequested),(0,J.M)(this.store.pipe((0,a.Ys)(y))),(0,V.h)(([,e])=>!e),(0,K.zg)(()=>this.bloodBanksService.findAllBloodBanks()),(0,W.U)(e=>new p({bloodBanks:e})))}}ae.\u0275fac=function(e){return new(e||ae)(k.\u0275\u0275inject(G.eX),k.\u0275\u0275inject(re),k.\u0275\u0275inject(a.yh))},ae.\u0275prov=k.\u0275\u0275defineInjectable({token:ae,factory:ae.\u0275fac}),(0,Q.gn)([(0,G.Qm)()],ae.prototype,"loadBloodBank$",void 0),(0,Q.gn)([(0,G.Qm)()],ae.prototype,"loadAllBloodBanks$",void 0);var ie=o(28049);let le=(()=>{class e{constructor(e,t){this.bloodBanksService=e,this.store=t}resolve(e,t){const o=e.params.id;return this.store.pipe((0,a.Ys)((e=>(0,a.P1)(m,t=>t.entities[e]))(o)),(0,j.b)(e=>{e||this.store.dispatch(new d({bloodBankId:o}))}),(0,V.h)(e=>!!e),(0,ie.P)())}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(re),k.\u0275\u0275inject(a.yh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),de=(()=>{class e{constructor(e,t){this.donorsService=e,this.store=t}resolve(e,t){const o=e.params.id;return this.store.pipe((0,a.Ys)((e=>(0,a.P1)(E,t=>t.entities[e]))(o)),(0,j.b)(e=>{e||this.store.dispatch(new S({donorId:o}))}),(0,V.h)(e=>!!e),(0,ie.P)())}}return e.\u0275fac=function(t){return new(t||e)(k.\u0275\u0275inject(oe),k.\u0275\u0275inject(a.yh))},e.\u0275prov=k.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),ce=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=k.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=k.\u0275\u0275defineInjector({providers:[re,le,oe,de],imports:[[n.ez,N,Y.MiscellaneousModule,v.nKr,v.T2N,v.zyh,v.MfT,v.HKp,U.$,v.j5J,F.J7,v.EoG,v._WB,D.ne,H.R,T.O,a.Aw.forFeature("bloodBanks",b),G.sQ.forFeature([ae]),a.Aw.forFeature("donors",R),G.sQ.forFeature([ne])]]}),e})()}}]);