"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[897],{83897:function(t,e,n){n.r(e),n.d(e,{AppointmentModule:function(){return X}});var i=n(38583),s=n(95987),o=n(55477),r=n(37716);let p=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["ngx-appointment-calender"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"appointment-calender works!"),r.\u0275\u0275elementEnd())},styles:[""]}),t})();var a=n(76185),l=n(23065),m=n(80273),c=(()=>{return(t=c||(c={})).AppointmentRequested="[View Appointment Page] Appointment Requested",t.AppointmentLoaded="[Appointments API] Appointment Loaded",t.AllAppointmentsRequested="[Appointments Home Page] All Appointments Requested",t.AllAppointmentsLoaded="[Appointments API] All Appointments Loaded",t.AppointmentSaved="[Edit Appointment Dialog] Appointment Saved",c;var t})();class d{constructor(t){this.payload=t,this.type=c.AppointmentRequested}}class u{constructor(t){this.payload=t,this.type=c.AppointmentLoaded}}class h{constructor(){this.type=c.AllAppointmentsRequested}}class f{constructor(t){this.payload=t,this.type=c.AllAppointmentsLoaded}}const g=(0,m.H)(),A=g.getInitialState({allAppointmentsLoaded:!1});function y(t=A,e){switch(e.type){case c.AppointmentLoaded:return g.addOne(e.payload.appointment,t);case c.AllAppointmentsLoaded:return g.setAll(e.payload.appointments,Object.assign(Object.assign({},t),{allAppointmentsLoaded:!0}));case c.AppointmentSaved:return g.updateOne(e.payload.appointment,t);default:return t}}const{selectAll:b}=g.getSelectors(),v=(0,l.ZF)("appointments"),C=(0,l.P1)(v,b),w=(0,l.P1)(C,t=>t.filter(t=>"Treated"===t.appointment_status)),_=(0,l.P1)(C,t=>t.filter(t=>"Confirmed"===t.appointment_status)),S=(0,l.P1)(C,t=>t.filter(t=>"Requested"===t.appointment_status)),P=(0,l.P1)(C,t=>t.filter(t=>"Cancelled"===t.appointment_status)),j=(0,l.P1)(C,t=>t.filter(t=>"Pending Confirmation"===t.appointment_status)),E=(0,l.P1)(v,t=>t.allAppointmentsLoaded);var $=n(68307),I=n(98152),k=n(54550);let O=(()=>{class t{constructor(t,e){this.service=t,this.store=e,this.for_all_settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"},appointment_status:{title:"Status",type:"string"}}},this.settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"}}},this.all=new a.nC,this.pending=new a.nC,this.confirmed=new a.nC,this.treated=new a.nC,this.cancelled=new a.nC,this.requested=new a.nC,this.store.pipe((0,l.Ys)(E),(0,$.b)(t=>{t||this.store.dispatch(new h)})).subscribe(),this.allAppointments$=this.store.pipe((0,l.Ys)(C)),this.pendingAppointments$=this.store.pipe((0,l.Ys)(j)),this.confirmedAppointments$=this.store.pipe((0,l.Ys)(_)),this.treatedAppointments$=this.store.pipe((0,l.Ys)(w)),this.cancelledAppointments$=this.store.pipe((0,l.Ys)(P)),this.requestedAppointments$=this.store.pipe((0,l.Ys)(S))}onDeleteConfirm(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275directiveInject(I.B),r.\u0275\u0275directiveInject(l.yh))},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["ngx-appointment-list"]],decls:27,vars:24,consts:[[1,"row"],[1,"col-12"],["size","small"],["type","submit","nbButton","","status","danger"],["fullWidth",""],["tabTitle","All"],[3,"settings","source","deleteConfirm"],["tabTitle","Pending Confimation"],["tabTitle","Confirmed"],["tabTitle","Treated"],["tabTitle","Cancelled"],["tabTitle","Requested"]],template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275elementStart(2,"nb-card",2),r.\u0275\u0275elementStart(3,"nb-card-header"),r.\u0275\u0275text(4," Appointment's Table "),r.\u0275\u0275elementStart(5,"button",3),r.\u0275\u0275text(6,"Add Appointment"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"nb-card-body"),r.\u0275\u0275elementStart(8,"nb-tabset",4),r.\u0275\u0275elementStart(9,"nb-tab",5),r.\u0275\u0275elementStart(10,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(11,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"nb-tab",7),r.\u0275\u0275elementStart(13,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(14,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"nb-tab",8),r.\u0275\u0275elementStart(16,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(17,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(18,"nb-tab",9),r.\u0275\u0275elementStart(19,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(20,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"nb-tab",10),r.\u0275\u0275elementStart(22,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(23,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"nb-tab",11),r.\u0275\u0275elementStart(25,"ng2-smart-table",6),r.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),r.\u0275\u0275pipe(26,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&t&&(r.\u0275\u0275advance(10),r.\u0275\u0275property("settings",e.for_all_settings)("source",r.\u0275\u0275pipeBind1(11,12,e.allAppointments$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.settings)("source",r.\u0275\u0275pipeBind1(14,14,e.pendingAppointments$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.settings)("source",r.\u0275\u0275pipeBind1(17,16,e.confirmedAppointments$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.settings)("source",r.\u0275\u0275pipeBind1(20,18,e.treatedAppointments$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.settings)("source",r.\u0275\u0275pipeBind1(23,20,e.cancelledAppointments$)),r.\u0275\u0275advance(3),r.\u0275\u0275property("settings",e.settings)("source",r.\u0275\u0275pipeBind1(26,22,e.requestedAppointments$)))},directives:[k.Asz,k.ndF,k.DPz,k.yKW,k.kyn,k.TR4,a.T5],pipes:[i.Ov],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),t})();const R=[{path:"",component:O,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:O},{path:"upcoming",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.\u0275\u0275defineComponent({type:t,selectors:[["ngx-appointment-upcoming"]],decls:2,vars:0,template:function(t,e){1&t&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1,"appointment-upcoming works!"),r.\u0275\u0275elementEnd())},styles:[""]}),t})()},{path:"calender",component:p},{path:"**",component:o.w}]}];let T=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({imports:[[s.Bz.forChild(R)],s.Bz]}),t})();var D=n(73749),M=n(55171),q=n(3679),B=n(64762),L=n(91601),z=n(19773),Y=n(88002),x=n(57057),U=n(45435),F=n(91841);class H{constructor(t,e,n,i,s,o,r,p){this.id=t,this.doctor_id=e,this.patient_id=n,this.doctor_name=i,this.patient_name=s,this.remarks=o,this.date=r,this.appointment_status=p}}let N=(()=>{class t{adapt(t){return new H(t.id,t.doctor_id,t.patient_id,`Dr. ${t.doctor.user.first_name} ${t.doctor.user.other_name}`,t.patient.user.first_name+" "+t.patient.user.other_name,t.remarks,t.date,t.appointment_status)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var Q=n(486);let W=(()=>{class t{constructor(t,e,n){this.http=t,this.adapter=e,this.jarwis=n}findAppointmentById(t){return this.http.get(this.jarwis.apiUrl+`/appointments/${t}`)}findAllAppointments(){return this.jarwis.getURI("appointments").pipe((0,Y.U)(t=>t.data.map(t=>this.adapter.adapt(t))))}saveAppointment(t,e){return this.http.put("/api/appointments/"+t,e)}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(F.eN),r.\u0275\u0275inject(N),r.\u0275\u0275inject(Q.R))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})();class K{constructor(t,e,n){this.actions$=t,this.appointmentsService=e,this.store=n,this.loadAppointment$=this.actions$.pipe((0,L.l4)(c.AppointmentRequested),(0,z.zg)(t=>this.appointmentsService.findAppointmentById(t.payload.appointmentId)),(0,Y.U)(t=>new u({appointment:t}))),this.loadAllAppointments$=this.actions$.pipe((0,L.l4)(c.AllAppointmentsRequested),(0,x.M)(this.store.pipe((0,l.Ys)(E))),(0,U.h)(([,t])=>!t),(0,z.zg)(()=>this.appointmentsService.findAllAppointments()),(0,Y.U)(t=>new f({appointments:t})))}}K.\u0275fac=function(t){return new(t||K)(r.\u0275\u0275inject(L.eX),r.\u0275\u0275inject(W),r.\u0275\u0275inject(l.yh))},K.\u0275prov=r.\u0275\u0275defineInjectable({token:K,factory:K.\u0275fac}),(0,B.gn)([(0,L.Qm)()],K.prototype,"loadAppointment$",void 0),(0,B.gn)([(0,L.Qm)()],K.prototype,"loadAllAppointments$",void 0);var G=n(28049);let V=(()=>{class t{constructor(t,e){this.appointmentsService=t,this.store=e}resolve(t,e){const n=t.params.id;return this.store.pipe((0,l.Ys)((t=>(0,l.P1)(v,e=>e.entities[t]))(n)),(0,$.b)(t=>{t||this.store.dispatch(new d({appointmentId:n}))}),(0,U.h)(t=>!!t),(0,G.P)())}}return t.\u0275fac=function(e){return new(e||t)(r.\u0275\u0275inject(W),r.\u0275\u0275inject(l.yh))},t.\u0275prov=r.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t})(),X=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=r.\u0275\u0275defineInjector({providers:[W,V],imports:[[i.ez,T,k.EoG,q.u5,k.nKr,k.T2N,k.zyh,k.MfT,D.$,k._WB,M.R,a.ne,l.Aw.forFeature("appointments",y),L.sQ.forFeature([K])]]}),t})()}}]);