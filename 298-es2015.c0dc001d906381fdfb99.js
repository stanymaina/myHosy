"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[298],{90298:function(e,t,i){i.r(t),i.d(t,{PrescriptionModule:function(){return Y}});var n=i(38583),r=i(95987),s=i(55477),o=(()=>{return(e=o||(o={})).PrescriptionRequested="[View Prescription Page] Prescription Requested",e.PrescriptionLoaded="[Prescriptions API] Prescription Loaded",e.AllPrescriptionsRequested="[Prescriptions Home Page] All Prescriptions Requested",e.AllPrescriptionsLoaded="[Prescriptions API] All Prescriptions Loaded",e.PrescriptionSaved="[Edit Prescription Dialog] Prescription Saved",o;var e})();class c{constructor(e){this.payload=e,this.type=o.PrescriptionRequested}}class a{constructor(e){this.payload=e,this.type=o.PrescriptionLoaded}}class p{constructor(){this.type=o.AllPrescriptionsRequested}}class l{constructor(e){this.payload=e,this.type=o.AllPrescriptionsLoaded}}var d=i(23065);const u=(0,i(80273).H)(),h=u.getInitialState({allPrescriptionsLoaded:!1});function m(e=h,t){switch(t.type){case o.PrescriptionLoaded:return u.addOne(t.payload.prescription,e);case o.AllPrescriptionsLoaded:return u.setAll(t.payload.prescriptions,Object.assign(Object.assign({},e),{allPrescriptionsLoaded:!0}));case o.PrescriptionSaved:return u.updateOne(t.payload.prescription,e);default:return e}}const{selectAll:f}=u.getSelectors(),y=(0,d.ZF)("prescriptions"),P=(0,d.P1)(y,f),v=(0,d.P1)(y,e=>e.allPrescriptionsLoaded);var g=i(68307),b=i(37716),j=i(54550),w=i(76185);let _=(()=>{class e{constructor(e){this.store=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{id:{title:"#",type:"number"},given_on:{title:"Date",type:"string"},employee_name:{title:"Doctor",type:"string"},patient_name:{title:"Patient",type:"string"},medicine_id:{title:"Medicine",type:"string"}}},this.store.pipe((0,d.Ys)(v),(0,g.b)(e=>{e||this.store.dispatch(new p)})).subscribe(),this.allPrescriptions$=this.store.pipe((0,d.Ys)(P))}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(b.\u0275\u0275directiveInject(d.yh))},e.\u0275cmp=b.\u0275\u0275defineComponent({type:e,selectors:[["ngx-prescription"]],decls:6,vars:4,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(b.\u0275\u0275elementStart(0,"nb-card"),b.\u0275\u0275elementStart(1,"nb-card-header"),b.\u0275\u0275text(2," Prescriptions' Table "),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementStart(3,"nb-card-body"),b.\u0275\u0275elementStart(4,"ng2-smart-table",0),b.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),b.\u0275\u0275pipe(5,"async"),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd(),b.\u0275\u0275elementEnd()),2&e&&(b.\u0275\u0275advance(4),b.\u0275\u0275property("settings",t.settings)("source",b.\u0275\u0275pipeBind1(5,2,t.allPrescriptions$)))},directives:[j.Asz,j.ndF,j.yKW,w.T5],pipes:[n.Ov],styles:[""]}),e})();const A=[{path:"",component:_,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"add",component:_},{path:"**",component:s.w}]}];let I=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=b.\u0275\u0275defineInjector({imports:[[r.Bz.forChild(A)],r.Bz]}),e})();var C=i(73749),k=i(45887),B=i(61758),S=i(55171),$=i(3679),L=i(64762),R=i(19773),q=i(88002),z=i(57057),D=i(45435),M=i(91841);class O{constructor(e,t,i,n,r,s,o,c,a,p,l,d,u,h,m){this.id=e,this.patient=t,this.patient_id=i,this.patient_name=n,this.employee=r,this.employee_id=s,this.employee_name=o,this.advice=c,this.symptom=a,this.medicine_id=p,this.medicine=l,this.validity=d,this.pres_img_url=u,this.state=h,this.given_on=m}}let E=(()=>{class e{adapt(e){return new O(e.id,e.patient_id,e.patient,e.patient.user.first_name+" "+e.patient.user.other_name,e.employee,e.employee_id,`Dr. ${e.employee.user.first_name} ${e.employee.user.other_name}`,e.advice,e.symptom,e.medicine_id,e.medicines,e.validity,e.pres_img_url,e.state,e.given_on)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=b.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var U=i(486);let F=(()=>{class e{constructor(e,t,i){this.http=e,this.adapter=t,this.jarwis=i}findPrescriptionById(e){return this.http.get(this.jarwis.apiUrl+`/prescriptions/${e}`)}findAllPrescriptions(){return this.jarwis.getURI("prescriptions").pipe((0,q.U)(e=>e.data.map(e=>this.adapter.adapt(e))))}savePrescription(e,t){return this.http.put("/api/prescriptions/"+e,t)}}return e.\u0275fac=function(t){return new(t||e)(b.\u0275\u0275inject(M.eN),b.\u0275\u0275inject(E),b.\u0275\u0275inject(U.R))},e.\u0275prov=b.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})();class H{constructor(e,t,i){this.actions$=e,this.prescriptionsService=t,this.store=i,this.loadPrescription$=this.actions$.pipe((0,k.l4)(o.PrescriptionRequested),(0,R.zg)(e=>this.prescriptionsService.findPrescriptionById(e.payload.prescriptionId)),(0,q.U)(e=>new a({prescription:e}))),this.loadAllPrescriptions$=this.actions$.pipe((0,k.l4)(o.AllPrescriptionsRequested),(0,z.M)(this.store.pipe((0,d.Ys)(v))),(0,D.h)(([,e])=>!e),(0,R.zg)(()=>this.prescriptionsService.findAllPrescriptions()),(0,q.U)(e=>new l({prescriptions:e})))}}H.\u0275fac=function(e){return new(e||H)(b.\u0275\u0275inject(k.eX),b.\u0275\u0275inject(F),b.\u0275\u0275inject(d.yh))},H.\u0275prov=b.\u0275\u0275defineInjectable({token:H,factory:H.\u0275fac}),(0,L.gn)([(0,k.Qm)()],H.prototype,"loadPrescription$",void 0),(0,L.gn)([(0,k.Qm)()],H.prototype,"loadAllPrescriptions$",void 0);var T=i(28049);let N=(()=>{class e{constructor(e,t){this.prescriptionsService=e,this.store=t}resolve(e,t){const i=e.params.id;return this.store.pipe((0,d.Ys)((e=>(0,d.P1)(y,t=>t.entities[e]))(i)),(0,g.b)(e=>{e||this.store.dispatch(new c({prescriptionId:i}))}),(0,D.h)(e=>!!e),(0,T.P)())}}return e.\u0275fac=function(t){return new(t||e)(b.\u0275\u0275inject(F),b.\u0275\u0275inject(d.yh))},e.\u0275prov=b.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e})(),Y=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=b.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=b.\u0275\u0275defineInjector({providers:[F,N],imports:[[n.ez,I,B.dF,j.EoG,$.u5,j.nKr,j.T2N,j.zyh,j.MfT,j.OA,C.$,j._WB,j.IIj,j.kmq,j.j7H.forChild(),j.wXm.forChild(),w.ne,S.R,d.Aw.forFeature("prescriptions",m),k.sQ.forFeature([H]),$.UX]]}),e})()}}]);