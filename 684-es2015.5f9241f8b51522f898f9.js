"use strict";(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[684],{77684:function(e,t,n){n.r(t),n.d(t,{ScheduleModule:function(){return z}});var i=n(38583),o=n(95987),s=n(55477),r=n(76185),a=n(37716),l=n(98152),c=n(54550);let d=(()=>{class e{constructor(e){this.service=e,this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>'},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{firstName:{title:"Doctor",type:"string"},lastName:{title:"Date",type:"string"}}},this.source=new r.nC;const t=this.service.getData();this.source.load(t)}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(l.B))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["ngx-holidays"]],decls:5,vars:2,consts:[[3,"settings","source","deleteConfirm"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"nb-card"),a.\u0275\u0275elementStart(1,"nb-card-header"),a.\u0275\u0275text(2," Holidays's Table "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"nb-card-body"),a.\u0275\u0275elementStart(4,"ng2-smart-table",0),a.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(4),a.\u0275\u0275property("settings",t.settings)("source",t.source))},directives:[c.Asz,c.ndF,c.yKW,r.T5],styles:[""]}),e})();var u=n(68307),m=n(68020),h=n(65513),p=n(18541),y=n(65890),f=n(23065),b=n(42253),v=n(16738),w=n(91841),g=n(3679),S=n(486);function C(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"li"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){const e=t.$implicit;a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" Something is ",e," ")}}const D=[{path:"",children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:(()=>{class e{constructor(e,t,n,i){this.http=e,this.store=t,this.formBuilder=n,this.apiClient=i,this.days=["Monday","Tuesday","Wednesday","Thursday","Friday","Saterday","Sunday"],this.settings={add:{addButtonContent:'<i class="nb-plus"></i>',createButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmCreate:!0},edit:{editButtonContent:'<i class="nb-edit"></i>',saveButtonContent:'<i class="nb-checkmark"></i>',cancelButtonContent:'<i class="nb-close"></i>',confirmEdit:!0},delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{name:{title:"Doctor",editable:!1,type:"string"},day_of_week:{editable:!1,title:"Days",type:"html",editor:{type:"list",config:{selectText:"Select",list:[{value:"Monday",title:"Monday"},{value:"Tuesday",title:"Tuesday"},{value:"Wednesday",title:"Wednesday"},{value:"Thursday",title:"Thursday"},{value:"Friday",title:"Friday"},{value:"Saturday",title:"Saturday"},{value:"Sunday",title:"Sunday"}]}}},start_time:{title:"Start Time",type:"string",editor:{type:"custom",component:b.e}},end_time:{title:"End Time",type:"string",editor:{type:"custom",component:b.e}},duration:{title:"Duration",type:"number"},unavailable:{title:"Available",type:"number",editor:{type:"list",config:{selectText:"Select",list:[{value:"1",title:"False"},{value:"0",title:"True"}]}}}}},this.source=new r.nC,this.store.pipe((0,f.Ys)(p.Zy),(0,u.b)(e=>{e||this.store.dispatch(new m.dP)})).subscribe(),this.store.pipe((0,f.Ys)(y.Js),(0,u.b)(e=>{e||this.store.dispatch(new h.XA)})).subscribe(),this.allDoctors$=this.store.pipe((0,f.Ys)(p.Bv)),this.allSchedules$=this.store.pipe((0,f.Ys)(y.mg))}ngOnInit(){}addSchedule(e){console.log(e);const t={employee_id:12,day_of_week:e.newData.day_of_week,start_time:v(new Date(e.newData.start_time)).format("hh:mm"),end_time:v(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable};console.log(this.checkScheduleValidity(t)),this.ScheduleForm=this.formBuilder.group({employee_id:12,day:e.newData.day_of_week,start_time:v(new Date(e.newData.start_time)).format("hh:mm"),end_time:v(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable}),this.apiClient.postURI("schedules",this.ScheduleForm.value).subscribe(t=>{console.log(t),e.confirm.resolve(e.newData)},e=>{console.log(e),e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}updateSchedule(e){console.log(e);const t={employee_id:35,day:e.newData.day_of_week,start_time:v(new Date(e.newData.start_time)).format("hh:mm"),end_time:v(new Date(e.newData.end_time)).format("hh:mm"),duration:e.newData.duration,unavailable:e.newData.unavailable};this.ScheduleForm=this.formBuilder.group(t),console.log(this.checkScheduleValidity(t)),this.apiClient.putURI("schedules",e.data.employee_id,this.ScheduleForm.value).subscribe(t=>{console.log(t),e.confirm.resolve(e.newData)},e=>{e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")}),this.http.put(this.apiClient.apiUrl+"/"+e.data.employee_id,this.ScheduleForm.value).subscribe(t=>{console.log(t),e.confirm.resolve(e.newData)},e=>{e.error instanceof Error?console.log("Client-side error occured."):console.log("Server-side error occured.")})}onDeleteConfirm(e){window.confirm("Are you sure you want to delete?")?e.confirm.resolve():e.confirm.reject()}checkScheduleValidity(e){let t=!1;var n,i=[];return this.employeeSchedule$=this.store.pipe((0,f.Ys)((0,y.sG)(e.employee_id))),this.store.select((0,y.sG)(e.employee_id)).subscribe(e=>{n=e}),console.log(n),this.store.pipe((0,f.Ys)((0,y.sG)(e.employee_id))).subscribe(n=>{this.employeeSchedules=n,console.log(n),i.indexOf(this.employeeSchedule.day_of_week)!==e.day&&(t=!0),this.employeeSchedule.day_of_week.includes(e.day)}),console.log(t),t}}return e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(w.eN),a.\u0275\u0275directiveInject(f.yh),a.\u0275\u0275directiveInject(g.qu),a.\u0275\u0275directiveInject(S.R))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["ngx-schedule"]],decls:11,vars:10,consts:[[4,"ngFor","ngForOf"],[3,"settings","source","deleteConfirm","createConfirm","editConfirm"]],template:function(e,t){1&e&&(a.\u0275\u0275elementStart(0,"nb-card"),a.\u0275\u0275elementStart(1,"nb-card-header"),a.\u0275\u0275text(2," Schedule's Table "),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"nb-card-body"),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"async"),a.\u0275\u0275elementStart(6,"ul"),a.\u0275\u0275template(7,C,2,1,"li",0),a.\u0275\u0275pipe(8,"async"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(9,"ng2-smart-table",1),a.\u0275\u0275listener("deleteConfirm",function(e){return t.onDeleteConfirm(e)})("createConfirm",function(e){return t.addSchedule(e)})("editConfirm",function(e){return t.updateSchedule(e)}),a.\u0275\u0275pipe(10,"async"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e&&(a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(5,4,t.employeeSchedule$)," "),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngForOf",a.\u0275\u0275pipeBind1(8,6,t.employeeSchedule$)),a.\u0275\u0275advance(2),a.\u0275\u0275property("settings",t.settings)("source",a.\u0275\u0275pipeBind1(10,8,t.allSchedules$)))},directives:[c.Asz,c.ndF,c.yKW,i.sg,r.T5],pipes:[i.Ov],styles:[""]}),e})()},{path:"holidays",component:d},{path:"**",component:s.w}]}];let _=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({imports:[[o.Bz.forChild(D)],o.Bz]}),e})();var B=n(55171),k=n(73749),F=n(2001),T=n(10709),E=n(4222),I=n(1947),j=n(45887),x=n(40810),A=n(80541),M=n(2678),$=n(1398);let z=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({providers:[E.u,I.h,$.e,M.C],imports:[[i.ez,_,c.EoG,g.u5,c.nKr,c.T2N,c.zyh,c.MfT,k.$,c._WB,B.R,r.ne,f.Aw.forFeature("doctors",A.qf),j.sQ.forFeature([x.e]),f.Aw.forFeature("schedules",F.V8),j.sQ.forFeature([T.R])]]}),e})()}}]);