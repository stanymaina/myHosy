!function(){"use strict";function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==n)return;var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(p){s=!0,r=p}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}(t,n)||function(t,n){if(!t)return;if("string"==typeof t)return e(t,n);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return e(t,n)}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}(self.webpackChunkmyHosy=self.webpackChunkmyHosy||[]).push([[897],{83897:function(e,i,o){o.r(i),o.d(i,{AppointmentModule:function(){return et}});var a,s=o(38583),p=o(95987),l=o(55477),c=o(37716),u=((a=function(){function t(){n(this,t)}return r(t,[{key:"ngOnInit",value:function(){}}]),t}()).\u0275fac=function(t){return new(t||a)},a.\u0275cmp=c.\u0275\u0275defineComponent({type:a,selectors:[["ngx-appointment-calender"]],decls:2,vars:0,template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1,"appointment-calender works!"),c.\u0275\u0275elementEnd())},styles:[""]}),a),m=o(76185),d=o(23065),f=o(80273),h=function(){return(t=h||(h={})).AppointmentRequested="[View Appointment Page] Appointment Requested",t.AppointmentLoaded="[Appointments API] Appointment Loaded",t.AllAppointmentsRequested="[Appointments Home Page] All Appointments Requested",t.AllAppointmentsLoaded="[Appointments API] All Appointments Loaded",t.AppointmentSaved="[Edit Appointment Dialog] Appointment Saved",h;var t}(),y=function t(e){n(this,t),this.payload=e,this.type=h.AppointmentRequested},g=function t(e){n(this,t),this.payload=e,this.type=h.AppointmentLoaded},A=function t(){n(this,t),this.type=h.AllAppointmentsRequested},v=function t(e){n(this,t),this.payload=e,this.type=h.AllAppointmentsLoaded},b=(0,f.H)(),w=b.getInitialState({allAppointmentsLoaded:!1});function C(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case h.AppointmentLoaded:return b.addOne(e.payload.appointment,t);case h.AllAppointmentsLoaded:return b.setAll(e.payload.appointments,Object.assign(Object.assign({},t),{allAppointmentsLoaded:!0}));case h.AppointmentSaved:return b.updateOne(e.payload.appointment,t);default:return t}}var S=b.getSelectors().selectAll,_=(0,d.ZF)("appointments"),j=(0,d.P1)(_,S),k=(0,d.P1)(j,function(t){return t.filter(function(t){return"Treated"===t.appointment_status})}),P=(0,d.P1)(j,function(t){return t.filter(function(t){return"Confirmed"===t.appointment_status})}),E=(0,d.P1)(j,function(t){return t.filter(function(t){return"Requested"===t.appointment_status})}),I=(0,d.P1)(j,function(t){return t.filter(function(t){return"Cancelled"===t.appointment_status})}),$=(0,d.P1)(j,function(t){return t.filter(function(t){return"Pending Confirmation"===t.appointment_status})}),O=(0,d.P1)(_,function(t){return t.allAppointmentsLoaded}),T=o(68307),R=o(98152),M=o(54550),D=function(){var t=function(){function t(e,i){var r=this;n(this,t),this.service=e,this.store=i,this.for_all_settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"},appointment_status:{title:"Status",type:"string"}}},this.settings={actions:!1,columns:{id:{title:"#",type:"number"},patient_name:{title:"Patient",type:"string"},doctor_name:{title:"Doctor",type:"string"},date:{title:"Date-Time",type:"string"},remarks:{title:"Remarks",type:"string"}}},this.all=new m.nC,this.pending=new m.nC,this.confirmed=new m.nC,this.treated=new m.nC,this.cancelled=new m.nC,this.requested=new m.nC,this.store.pipe((0,d.Ys)(O),(0,T.b)(function(t){t||r.store.dispatch(new A)})).subscribe(),this.allAppointments$=this.store.pipe((0,d.Ys)(j)),this.pendingAppointments$=this.store.pipe((0,d.Ys)($)),this.confirmedAppointments$=this.store.pipe((0,d.Ys)(P)),this.treatedAppointments$=this.store.pipe((0,d.Ys)(k)),this.cancelledAppointments$=this.store.pipe((0,d.Ys)(I)),this.requestedAppointments$=this.store.pipe((0,d.Ys)(E))}return r(t,[{key:"onDeleteConfirm",value:function(t){window.confirm("Are you sure you want to delete?")?t.confirm.resolve():t.confirm.reject()}},{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.\u0275\u0275directiveInject(R.B),c.\u0275\u0275directiveInject(d.yh))},t.\u0275cmp=c.\u0275\u0275defineComponent({type:t,selectors:[["ngx-appointment-list"]],decls:27,vars:24,consts:[[1,"row"],[1,"col-12"],["size","small"],["type","submit","nbButton","","status","danger"],["fullWidth",""],["tabTitle","All"],[3,"settings","source","deleteConfirm"],["tabTitle","Pending Confimation"],["tabTitle","Confirmed"],["tabTitle","Treated"],["tabTitle","Cancelled"],["tabTitle","Requested"]],template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"nb-card",2),c.\u0275\u0275elementStart(3,"nb-card-header"),c.\u0275\u0275text(4," Appointment's Table "),c.\u0275\u0275elementStart(5,"button",3),c.\u0275\u0275text(6,"Add Appointment"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"nb-card-body"),c.\u0275\u0275elementStart(8,"nb-tabset",4),c.\u0275\u0275elementStart(9,"nb-tab",5),c.\u0275\u0275elementStart(10,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(11,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(12,"nb-tab",7),c.\u0275\u0275elementStart(13,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(14,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(15,"nb-tab",8),c.\u0275\u0275elementStart(16,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(17,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(18,"nb-tab",9),c.\u0275\u0275elementStart(19,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(20,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(21,"nb-tab",10),c.\u0275\u0275elementStart(22,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(23,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(24,"nb-tab",11),c.\u0275\u0275elementStart(25,"ng2-smart-table",6),c.\u0275\u0275listener("deleteConfirm",function(t){return e.onDeleteConfirm(t)}),c.\u0275\u0275pipe(26,"async"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&t&&(c.\u0275\u0275advance(10),c.\u0275\u0275property("settings",e.for_all_settings)("source",c.\u0275\u0275pipeBind1(11,12,e.allAppointments$)),c.\u0275\u0275advance(3),c.\u0275\u0275property("settings",e.settings)("source",c.\u0275\u0275pipeBind1(14,14,e.pendingAppointments$)),c.\u0275\u0275advance(3),c.\u0275\u0275property("settings",e.settings)("source",c.\u0275\u0275pipeBind1(17,16,e.confirmedAppointments$)),c.\u0275\u0275advance(3),c.\u0275\u0275property("settings",e.settings)("source",c.\u0275\u0275pipeBind1(20,18,e.treatedAppointments$)),c.\u0275\u0275advance(3),c.\u0275\u0275property("settings",e.settings)("source",c.\u0275\u0275pipeBind1(23,20,e.cancelledAppointments$)),c.\u0275\u0275advance(3),c.\u0275\u0275property("settings",e.settings)("source",c.\u0275\u0275pipeBind1(26,22,e.requestedAppointments$)))},directives:[M.Asz,M.ndF,M.DPz,M.yKW,M.kyn,M.TR4,m.T5],pipes:[s.Ov],styles:[".nb-theme-default   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-dark   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-cosmic   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}.nb-theme-corporate   [_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translate(0);height:100%}"]}),t}(),q=[{path:"",component:D,children:[{path:"",redirectTo:"all",pathMatch:"full"},{path:"all",component:D},{path:"upcoming",component:function(){var t=function(){function t(){n(this,t)}return r(t,[{key:"ngOnInit",value:function(){}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=c.\u0275\u0275defineComponent({type:t,selectors:[["ngx-appointment-upcoming"]],decls:2,vars:0,template:function(t,e){1&t&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1,"appointment-upcoming works!"),c.\u0275\u0275elementEnd())},styles:[""]}),t}()},{path:"calender",component:u},{path:"**",component:l.w}]}],B=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({imports:[[p.Bz.forChild(q)],p.Bz]}),t}(),L=o(73749),z=o(55171),Y=o(3679),x=o(64762),U=o(91601),F=o(19773),H=o(88002),N=o(57057),Q=o(45435),W=o(91841),K=function t(e,i,r,o,a,s,p,l){n(this,t),this.id=e,this.doctor_id=i,this.patient_id=r,this.doctor_name=o,this.patient_name=a,this.remarks=s,this.date=p,this.appointment_status=l},G=function(){var t=function(){function t(){n(this,t)}return r(t,[{key:"adapt",value:function(t){return new K(t.id,t.doctor_id,t.patient_id,"Dr. ".concat(t.doctor.user.first_name," ").concat(t.doctor.user.other_name),t.patient.user.first_name+" "+t.patient.user.other_name,t.remarks,t.date,t.appointment_status)}}]),t}();return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=c.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),V=o(486),X=function(){var t=function(){function t(e,i,r){n(this,t),this.http=e,this.adapter=i,this.jarwis=r}return r(t,[{key:"findAppointmentById",value:function(t){return this.http.get(this.jarwis.apiUrl+"/appointments/".concat(t))}},{key:"findAllAppointments",value:function(){var t=this;return this.jarwis.getURI("appointments").pipe((0,H.U)(function(e){return e.data.map(function(e){return t.adapter.adapt(e)})}))}},{key:"saveAppointment",value:function(t,e){return this.http.put("/api/appointments/"+t,e)}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.\u0275\u0275inject(W.eN),c.\u0275\u0275inject(G),c.\u0275\u0275inject(V.R))},t.\u0275prov=c.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),Z=function e(i,r,o){var a=this;n(this,e),this.actions$=i,this.appointmentsService=r,this.store=o,this.loadAppointment$=this.actions$.pipe((0,U.l4)(h.AppointmentRequested),(0,F.zg)(function(t){return a.appointmentsService.findAppointmentById(t.payload.appointmentId)}),(0,H.U)(function(t){return new g({appointment:t})})),this.loadAllAppointments$=this.actions$.pipe((0,U.l4)(h.AllAppointmentsRequested),(0,N.M)(this.store.pipe((0,d.Ys)(O))),(0,Q.h)(function(e){return!t(e,2)[1]}),(0,F.zg)(function(){return a.appointmentsService.findAllAppointments()}),(0,H.U)(function(t){return new v({appointments:t})}))};Z.\u0275fac=function(t){return new(t||Z)(c.\u0275\u0275inject(U.eX),c.\u0275\u0275inject(X),c.\u0275\u0275inject(d.yh))},Z.\u0275prov=c.\u0275\u0275defineInjectable({token:Z,factory:Z.\u0275fac}),(0,x.gn)([(0,U.Qm)()],Z.prototype,"loadAppointment$",void 0),(0,x.gn)([(0,U.Qm)()],Z.prototype,"loadAllAppointments$",void 0);var J=o(28049),tt=function(){var t=function(){function t(e,i){n(this,t),this.appointmentsService=e,this.store=i}return r(t,[{key:"resolve",value:function(t,e){var n,i=this,r=t.params.id;return this.store.pipe((0,d.Ys)((n=r,(0,d.P1)(_,function(t){return t.entities[n]}))),(0,T.b)(function(t){t||i.store.dispatch(new y({appointmentId:r}))}),(0,Q.h)(function(t){return!!t}),(0,J.P)())}}]),t}();return t.\u0275fac=function(e){return new(e||t)(c.\u0275\u0275inject(X),c.\u0275\u0275inject(d.yh))},t.\u0275prov=c.\u0275\u0275defineInjectable({token:t,factory:t.\u0275fac}),t}(),et=function(){var t=function t(){n(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.\u0275\u0275defineNgModule({type:t}),t.\u0275inj=c.\u0275\u0275defineInjector({providers:[X,tt],imports:[[s.ez,B,M.EoG,Y.u5,M.nKr,M.T2N,M.zyh,M.MfT,L.$,M._WB,z.R,m.ne,d.Aw.forFeature("appointments",C),U.sQ.forFeature([Z])]]}),t}()}}])}();